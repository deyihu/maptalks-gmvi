!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=11)}([function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(){r(this,t)}return i(t,[{key:"draw",value:function(t,e,n){}},{key:"getMaxCount",value:function(t){var e=0;for(var n in t){var r=t[n],i=r.count;i&&(i>e&&(e=i))}return parseFloat(e)}}]),t}();e.default=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e){r(this,t),e=e||{},this.gradient=e.gradient||{.25:"rgba(0, 0, 255, 1)",.55:"rgba(0, 255, 0, 1)",.85:"rgba(255, 255, 0, 1)",1:"rgba(255, 0, 0, 1)"},this.maxSize=e.maxSize||35,this.max=e.max||100,this.initPalette()}return i(t,[{key:"initPalette",value:function(){var t=this.gradient;if("undefined"==typeof document)var e=new Canvas(256,1);else var e=document.createElement("canvas");e.width=256,e.height=1;var n=this.paletteCtx=e.getContext("2d"),r=n.createLinearGradient(0,0,256,1);for(var i in t)r.addColorStop(parseFloat(i),t[i]);n.fillStyle=r,n.fillRect(0,0,256,1)}},{key:"getColor",value:function(t){var e=this.max;t>e&&(t=e);var n=4*Math.floor(t/e*255),r=this.paletteCtx.getImageData(0,0,256,1).data;return"rgba("+r[n]+", "+r[n+1]+", "+r[n+2]+", "+r[n+3]/256+")"}},{key:"getSize",value:function(t){var e=this.max,n=this.maxSize;return t>e&&(t=e),t/e*n}}]),t}();e.default=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e){r(this,t),this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.style=e.style,this.color=e.color,this.size=e.size,this.borderWidth=e.borderWidth,this.borderColor=e.borderColor,this.arrowSize=e.arrowSize}return i(t,[{key:"draw",value:function(t){t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.lineWidth=this.borderWidth||0,t.strokeStyle=this.borderColor||"#000",t.fillStyle=this.color||"#000",t.beginPath(),"circle"===this.style?t.arc(0,0,this.arrowSize,0,2*Math.PI,!1):"arrow"===this.style&&(t.moveTo(-this.size,-this.size),t.lineTo(this.size,0),t.lineTo(-this.size,this.size),t.lineTo(-this.size/4,0),t.lineTo(-this.size,-this.size)),t.closePath(),t.stroke(),t.fill(),t.restore()}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={};r.calculateColor=function(t,e){if(0===t.indexOf("#")){var n=t.slice(1);return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4),16)+","+e+")"}return/^rgb\(/.test(t)?t.replace(/rgb/,"rgba").replace(")",",")+e+")":t},r.forEach=function(t,e,n){if("function"==typeof Array.prototype.forEach)t.forEach(e,n);else for(var r=0,i=t.length;r<i;r++)e.apply(n,[t[r],r,t])},r.map=function(t,e,n){if("function"==typeof Array.prototype.map)return t.map(e,n);for(var r=[],i=0,a=t.length;i<a;i++)r[i]=e.apply(n,[t[i],i,t]);return r},e.default=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e,n){r(this,t),this._options=n||{},this._data=[],this._data=e}return i(t,[{key:"add",value:function(t,e){if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)this._data.push(t[n]);else{if(!(t instanceof Object))throw new Error("Unknown dataType");this._data.push(t)}}},{key:"get",value:function(t){return this._data}},{key:"set",value:function(t){this.clear(),this.add(t),this._trigger("change")}},{key:"clear",value:function(t){this._data=[]}},{key:"remove",value:function(t){}},{key:"update",value:function(t){}},{key:"transferCoordinate",value:function(t,e){function n(t){for(var n=[],r=0;r<t.length;r++){for(var i=t[r],a=[],o=0;o<i.length;o++)a.push(e(i[o]));n.push(a)}return n}for(var r=0;r<t.length;r++){t[r];if(t[r].geometry){if(t[r].geometry.type===GL.GMVI.Geometry.Point){var i=t[r].geometry.coordinates;t[r].geometry._coordinates=e(i)}if(t[r].geometry.type===GL.GMVI.Geometry.Polygon||t[r].geometry.type===GL.GMVI.Geometry.MultiPolygon){var i=t[r].geometry.coordinates;if(t[r].geometry.type===GL.GMVI.Geometry.Polygon){var a=n(i);t[r].geometry._coordinates=a}else if(t[r].geometry.type===GL.Geomtry.MultiPolygon){for(var a=[],o=0;o<i.length;o++){var s=i[o],s=n(s);a.push(s)}t[r].geometry._coordinates=a}}if(t[r].geometry.type===GL.Geomtry.LineString){for(var i=t[r].geometry.coordinates,a=[],l=0;l<i.length;l++)a.push(e(i[l]));t[r].geometry._coordinates=a}}}return t}},{key:"initGeometry",value:function(t){t?this._data.forEach(function(e){e.geometry=t(e)}):this._data.forEach(function(t){!t.geometry&&t.lng&&t.lat&&(t.geometry={type:"Point",coordinates:[t.lng,t.lat]})})}},{key:"lnglatTransFormMercator",value:function(){for(var t=0;t<this._data.length;t++){var e=this._data[t].geometry.coordinates;if(this._data[t].geometry.type==GL.GMVI.Geometry.Point)this._data[t].geometry.mercator_coordinates=proj4("EPSG:4326","EPSG:3857",e);else{for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(proj4("EPSG:4326","EPSG:3857",i))}this._data[t].geometry.mercator_coordinates=n}}}}]),t}();e.default=GL.GMVI.DataSet=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(){r(this,t)}return i(t,[{key:"drawDataSet",value:function(t,e,n){for(var r=e.get(),i=0,a=r.length;i<a;i++){var o=r[i];this.draw(t,o,n)}}},{key:"draw",value:function(t,e,n){var r=e.geometry.type;r==GL.GMVI.Geometry.Polyline&&(r=GL.GMVI.Geometry.LineString);var i=e.xy;n.symbol||GL.GMVI.Geometry.Circle;switch(r){case GL.GMVI.Geometry.Point:var a=e._size||e.size||n._size||n.size||12;e.icon&&(a=Math.min(e.icon.width,e.icon.height)/2),t.moveTo(e.x,e.y),n.symbol===GL.GMVI.Rect?t.rect(i[0],i[1],a,a):t.arc(i[0],i[1],a,0,2*Math.PI);break;case GL.GMVI.Geometry.Circle:this.drawPolygon(t,i);break;case GL.GMVI.Geometry.LineString:t.lineWidth=n.lineWidth||3;for(var o=0;o<i.length;o++){var s=i[o];0==o?t.moveTo(s[0],s[1]):t.lineTo(s[0],s[1])}break;case GL.GMVI.Geometry.Polygon:this.drawPolygon(t,i);break;case GL.GMVI.Geometry.Rectangle:var l=e.width,u=e.height,c=e.rotate||0;t.translate(i[0],i[1]),t.rotate(c*Math.PI/180),t.translate(-i[0],-i[1]),t.rect(i[0]-l/2,i[1]-u/2,l,u);break;default:console.error("type"+r+"is not support now!")}}},{key:"drawPolygon",value:function(t,e){for(var n=e.length,r=0;r<e.length;r++){var i=e[r];0==r?t.moveTo(i[0],i[1]):t.lineTo(i[0],i[1]),r==n-1&&t.lineTo(i[0],i[1])}}},{key:"drawArc",value:function(t,e,n){var r=e[0][0],i=e[0][1],a=e[1][0],o=e[1][1],s=Math.sqrt(Math.pow(r-a,2)+Math.pow(i-o,2)),l=(r+a)/2,u=(i+o)/2,c=1.5*(i-o)+l,f=1.5*(a-r)+u,h=Math.sqrt(Math.pow(s/2,2)+Math.pow(1.5*s,2)),g=Math.atan2(i-f,r-c),d=Math.atan2(o-f,a-c);t.save(),t.lineWidth=n.lineWidth||3,t.beginPath(),t.arc(c,f,h,g,d,!1),t.stroke(),t.restore()}}]),t}();e.default=new a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e){r(this,t);var n=e.startX,i=e.startY,a=e.endX,o=e.endY,s=Math.sqrt(Math.pow(n-a,2)+Math.pow(i-o,2)),l=(n+a)/2,u=(i+o)/2,c=1.5*(i-o)+l,f=1.5*(a-n)+u,h=Math.sqrt(Math.pow(s/2,2)+Math.pow(1.5*s,2)),g=Math.atan2(i-f,n-c),d=Math.atan2(o-f,a-c);this.startX=n,this.startY=i,this.endX=a,this.endY=o,this.centerX=c,this.centerY=f,this.startAngle=g,this.endAngle=d,this.startLabel=e&&e.labels&&e.labels[0],this.endLabel=e&&e.labels&&e.labels[1],this.radius=h,this.lineWidth=e.width||1,this.strokeStyle=e.color||"#000",this.label=e.label,this.font=e.font,this.shadowBlur=e.shadowBlur}return i(t,[{key:"draw",value:function(t){if(t.save(),t.lineWidth=this.lineWidth,t.strokeStyle=this.strokeStyle,t.shadowColor=this.strokeStyle,t.shadowBlur=this.shadowBlur||2,t.beginPath(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,!1),t.stroke(),t.restore(),t.save(),t.fillStyle=this.strokeStyle,this.label){if(t.font=this.font,this.startLabel){var e=this.startX-15,n=this.startY+5;t.fillText(this.startLabel,e,n)}if(this.endLabel){var e=this.endX-15,n=this.endY-5;t.fillText(this.endLabel,e,n)}}t.restore()}}]),t}();e.default=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(3),o=function(t){return t&&t.__esModule?t:{default:t}}(a),s=function(){function t(e){r(this,t),this.x=e.x,this.y=e.y,this.maxRadius=e.radius,this.color=e.color,this.shadowBlur=5,this.lineWidth=e.borderWidth,this.r=0,this.factor=2/e.radius,this.font=e.font,this.name=e.name}return i(t,[{key:"draw",value:function(t){var e=this.color;if(e=o.default.calculateColor(e,1-this.r/this.maxRadius),this.name){t.save(),t.font=this.font,t.fillStyle=this.color;var n=t.measureText(this.name).width;t.fillText(this.name,this.x-n/2,this.y)}t.restore(),t.save();this.maxRadius,this.r,this.factor;this.r+=.5,t.save(),t.translate(this.x,this.y);var e=this.color;e=o.default.calculateColor(e,1-this.r/this.maxRadius),t.strokeStyle=e,t.shadowBlur=this.shadowBlur,t.shadowColor=e,t.lineWidth=this.lineWidth,t.beginPath(),t.arc(0,0,this.r,0,2*Math.PI,!1),t.stroke(),t.restore(),Math.abs(this.maxRadius-this.r)<.8&&(this.r=0)}}]),t}();e.default=s},function(t,e,n){var r=function(){function t(t){return Number(t)===t&&t%1!=0}function e(t){if(t=t||{},this.size=t.size||256,!n[this.size]){var e=this.size,r=n[this.size]={};r.Bc=[],r.Cc=[],r.zc=[],r.Ac=[];for(var i=0;i<30;i++)r.Bc.push(e/360),r.Cc.push(e/(2*Math.PI)),r.zc.push(e/2),r.Ac.push(e),e*=2}this.Bc=n[this.size].Bc,this.Cc=n[this.size].Cc,this.zc=n[this.size].zc,this.Ac=n[this.size].Ac}var n={},r=Math.PI/180,i=180/Math.PI,a=6378137,o=20037508.342789244;return e.prototype.px=function(e,n){if(t(n)){var i=this.size*Math.pow(2,n),a=i/2,o=i/360,s=i/(2*Math.PI),l=i,u=Math.min(Math.max(Math.sin(r*e[1]),-.9999),.9999),c=a+e[0]*o,f=a+.5*Math.log((1+u)/(1-u))*-s;return c>l&&(c=l),f>l&&(f=l),[c,f]}var a=this.zc[n],u=Math.min(Math.max(Math.sin(r*e[1]),-.9999),.9999),c=Math.round(a+e[0]*this.Bc[n]),f=Math.round(a+.5*Math.log((1+u)/(1-u))*-this.Cc[n]);return c>this.Ac[n]&&(c=this.Ac[n]),f>this.Ac[n]&&(f=this.Ac[n]),[c,f]},e.prototype.ll=function(e,n){if(t(n)){var r=this.size*Math.pow(2,n),a=r/360,o=r/(2*Math.PI),s=r/2,l=(e[1]-s)/-o,u=(e[0]-s)/a,c=i*(2*Math.atan(Math.exp(l))-.5*Math.PI);return[u,c]}var l=(e[1]-this.zc[n])/-this.Cc[n],u=(e[0]-this.zc[n])/this.Bc[n],c=i*(2*Math.atan(Math.exp(l))-.5*Math.PI);return[u,c]},e.prototype.bbox=function(t,e,n,r,i){r&&(e=Math.pow(2,n)-1-e);var a=[t*this.size,(+e+1)*this.size],o=[(+t+1)*this.size,e*this.size],s=this.ll(a,n).concat(this.ll(o,n));return"900913"===i?this.convert(s,"900913"):s},e.prototype.xyz=function(t,e,n,r){"900913"===r&&(t=this.convert(t,"WGS84"));var i=[t[0],t[1]],a=[t[2],t[3]],o=this.px(i,e),s=this.px(a,e),l=[Math.floor(o[0]/this.size),Math.floor((s[0]-1)/this.size)],u=[Math.floor(s[1]/this.size),Math.floor((o[1]-1)/this.size)],c={minX:Math.min.apply(Math,l)<0?0:Math.min.apply(Math,l),minY:Math.min.apply(Math,u)<0?0:Math.min.apply(Math,u),maxX:Math.max.apply(Math,l),maxY:Math.max.apply(Math,u)};if(n){var f={minY:Math.pow(2,e)-1-c.maxY,maxY:Math.pow(2,e)-1-c.minY};c.minY=f.minY,c.maxY=f.maxY}return c},e.prototype.convert=function(t,e){return"900913"===e?this.forward(t.slice(0,2)).concat(this.forward(t.slice(2,4))):this.inverse(t.slice(0,2)).concat(this.inverse(t.slice(2,4)))},e.prototype.forward=function(t){var e=[a*t[0]*r,a*Math.log(Math.tan(.25*Math.PI+.5*t[1]*r))];return e[0]>o&&(e[0]=o),e[0]<-o&&(e[0]=-o),e[1]>o&&(e[1]=o),e[1]<-o&&(e[1]=-o),e},e.prototype.inverse=function(t){return[t[0]*i/a,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/a)))*i]},e}();t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function t(e,n){r(this,t);var e=document.getElementById(e)};e.default=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(3),s=r(o),l=n(2),u=r(l),c=function(){function t(e){i(this,t);var n=e.startX,r=e.startY,a=e.endX,o=e.endY,s=Math.sqrt(Math.pow(n-a,2)+Math.pow(r-o,2)),l=(n+a)/2,c=(r+o)/2,f=1.5*(r-o)+l,h=1.5*(a-n)+c,g=Math.sqrt(Math.pow(s/2,2)+Math.pow(1.5*s,2)),d=Math.atan2(r-h,n-f),p=Math.atan2(o-h,a-f);d*p<0&&(d<0?(d+=2*Math.PI,p+=2*Math.PI):p+=2*Math.PI),this.tailPointsCount=10,this.centerX=f,this.centerY=h,this.startAngle=d,this.endAngle=p,this.radius=g,this.lineWidth=e.width||1,this.strokeStyle=e.color||"#fff",this.factor=e.speed/this.radius,this.deltaAngle=80/Math.min(this.radius,400)/this.tailPointsCount,this.trailAngle=this.startAngle,this.arcAngle=this.startAngle,this.arrowSize=e.arrowSize||3,this.animateBlur=!0,this.marker=new u.default({x:50,y:80,rotation:50*Math.PI/180,style:"arrow",color:"rgb(255, 255, 255)",size:this.arrowSize,borderWidth:0,borderColor:this.strokeStyle,arrowSize:e.arrowSize||5})}return a(t,[{key:"drawArc",value:function(t,e,n,r,i){t.save(),t.lineWidth=n,t.strokeStyle=e,t.shadowColor=this.strokeStyle,t.lineCap="round",t.beginPath(),t.arc(this.centerX,this.centerY,this.radius,r,i,!1),t.stroke(),t.restore()}},{key:"draw",value:function(t){var e=this.endAngle,n=this.trailAngle+this.factor,r=this.strokeStyle;this.animateBlur&&(this.arcAngle=n),this.trailAngle=n,r=s.default.calculateColor(r,.1),this.drawArc(t,r,this.lineWidth,this.startAngle,this.arcAngle);for(var i=this.tailPointsCount,a=0;a<i;a++){var o=s.default.calculateColor(this.strokeStyle,.3-.3/i*a);this.trailAngle-this.deltaAngle*a>this.startAngle&&this.drawArc(t,o,4-4/i*a,this.trailAngle-this.deltaAngle*a,this.trailAngle)}t.save(),t.translate(this.centerX,this.centerY),this.marker.x=Math.cos(this.trailAngle)*this.radius,this.marker.y=Math.sin(this.trailAngle)*this.radius,this.marker.rotation=this.trailAngle+Math.PI/2,this.marker.draw(t),t.restore(),180*(e-this.trailAngle)/Math.PI<.5&&(this.trailAngle=this.startAngle,this.animateBlur=!1)}}]),t}();e.default=c},function(t,e,n){"use strict";n(12),n(4),n(13),n(14),n(15),n(16),n(17),n(18),n(19),n(20),n(22);var r=n(46),i=function(t){return t&&t.__esModule?t:{default:t}}(r);GL.GMVI.OPTION={size:5,id:"UUID",fillStyle:"rgba(200, 200, 50, 1)",strokeStyle:"rgba(0, 0, 255, 1)",lineWidth:4,globalAlpha:1,globalCompositeOperation:"lighter",shadowColor:"rgba(255, 255, 255, 1)",shadowBlur:35,maxSize:20,max:100,splitList:[{start:0,end:2,color:"color"},{start:3,end:4,color:"color"},{start:5,end:6,color:"color"}],gradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},maxClusterLv:3,showText:!0,font:"18px sans-serif",symbol:"rect",animation:{type:"time",stepsRange:{start:0,end:100},trails:10,duration:5},arrowSize:10,draw:"simple||bubble||intensity||category||choropleth||effect|| heatmap||grid||honeycomb||text||icon||cluster||tagcloud||migrate|| waterbubble||radial||star||arrow||scatter||migrateLines"};var a=i.default.id,o=i.default.version,s=i.default.date,l=a+": "+o+" Built by Iverson.hu,  ["+s+"]";if(GL.GMVI.VERSION=l,GL.GMVI.toString=function(){return GL.GMVI.VERSION},!window.maptalks)throw new Error("not find maptalks lib");window.maptalks&&(window.maptalks.GMVI=GL.GMVI)},function(t,e,n){"use strict";var r=window.GL||{};window.GL=r,r.GMVI=window.GL.GMVI||{},r.GMVI.Geometry=r.GMVI.Geometry||{},r.GMVI.Geometry.LineString="LineString",r.GMVI.Geometry.Point="Point",r.GMVI.Geometry.Polyline="Polyline",r.GMVI.Geometry.Polygon="Polygon",r.GMVI.Geometry.Rectangle="Rectangle",r.GMVI.Geometry.Circle="Circle",r.GMVI.Geometry.MultiPolygon="MultiPolygon",r.GMVI.Circle="circle",r.GMVI.Rect="rect",r.GMVI.Bubble="bubble",r.GMVI.Intensity="intensity",r.GMVI.Category="category",r.GMVI.Choropleth="choropleth",r.GMVI.Simple="simple",r.GMVI.Effect="effect",r.GMVI.Heatmap="heatmap",r.GMVI.Grid="grid",r.GMVI.Honeycomb="honeycomb",r.GMVI.Text="text",r.GMVI.Icon="icon",r.GMVI.Cluster="cluster",r.GMVI.TagCloud="tagcloud",r.GMVI.Webgl="webgl",r.GMVI.Migrate="migrate",r.GMVI.Bar="bar",r.GMVI.WaterBubble="waterbubble",r.GMVI.Radiation="radiation",r.GMVI.Radial="radial",r.GMVI.Star="star",r.GMVI.Percent="percent",r.GMVI.Video="video",r.GMVI.Scatter="scatter",r.GMVI.MigrateLines="migrateLines",r.GMVI.Arrow="arrow";var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");r.GMVI.uuid=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ID",e=new Array(36),n=0,r=void 0,a=0;a<36;a++)8===a||13===a||18===a||23===a?e[a]="-":14===a?e[a]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),r=15&n,n>>=4,e[a]=i[19===a?3&r|8:r]);return t+"-"+e.join("")}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(4),o=function(t){return t&&t.__esModule?t:{default:t}}(a),s=function(){function t(){r(this,t)}return i(t,[{key:"CSVToArray",value:function(t,e){e=e||",";for(var n=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),r=[[]],i=null;i=n.exec(t);){var a=i[1];a.length&&a!==e&&r.push([]);var o;o=i[2]?i[2].replace(new RegExp('""',"g"),'"'):i[3],r[r.length-1].push(o)}return r}},{key:"getDataSet",value:function(t){for(var e=this.CSVToArray(t,","),n=[],r=e[0],i=1;i<e.length-1;i++){for(var a=e[i],s={},l=0;l<a.length;l++){var u=a[l];"geometry"==r[l]&&(u=JSON.parse(u)),s[r[l]]=u}n.push(s)}return new o.default(n)}}]),t}();e.default=GL.GMVI.Csv=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(4),o=function(t){return t&&t.__esModule?t:{default:t}}(a),s=function(){function t(){r(this,t)}return i(t,[{key:"getDataSet",value:function(t){for(var e=[],n=t.features,r=0;r<n.length;r++){var i=n[r],a=i.geometry,s=i.properties,l={};for(var u in s)l[u]=s[u];l.geometry=a,e.push(l)}return new o.default(e)}}]),t}();e.default=GL.GMVI.GeoJson=new s},function(t,e,n){"use strict";GL.GMVI.ClusterUtil={cluster:function(t,e,n,r,i,a,o,s,l){var u=new GL.GMVI.ClusterUtil.Grid.GridCell([r,i,a,o],[s,l]),c=[];this.filter(t,r,a,i,o,u,c,e<n);var f=this.merge(c,u);return u=null,{discrete:c,cluster:f}},filter:function(t,e,n,r,i,a,o,s){for(var l=0,u=t.length;l<u;l++){var c=t[l][0],f=t[l][1],h=t[l][2],g=t[l][3];c<e||c>n||f<r||f>i||(s?a.add(c,f,h,g):o.push([c,f,h,g]))}},merge:function(t,e){var n=e.grid,r=[];for(var i in n)if(1!==n[i]._calculated){n[i]._calculated=1;for(var a=i.split("-"),o=a[0],s=a[1],l=n[i].center,u=l[0]-e.perLng/2,c=l[0]+e.perLng/2,f=l[1]-e.perLat/2,h=l[1]+e.perLat/2,g=[i],d=this.getNearGrid(o,s),p=0,y=d.length;p<y;p++){var v=d[p];if(void 0!==n[v]&&!n[v]._calculated){var m=n[v].center;m[0]>u&&m[0]<c&&m[1]>f&&m[1]<h&&(n[v]._calculated=1,g.push(v))}}r.push(g)}for(var b={},w=0,_=r.length;w<_;w++){var M=r[w],x=M.join("-");b[x]={count:0,item:[],center:null};for(var G=0,k=M.length;G<k;G++){var P=M[G];if(b[x].count+=n[P].count,b[x].item=b[x].item.concat(n[P].item),null!=b[x].center){var O=(b[x].center[0]+n[P].center[0])/2,I=(b[x].center[1]+n[P].center[1])/2;b[x].center=[O,I]}else b[x].center=n[P].center}}for(var S in b)b[S].count<3&&(t=t.concat(b[S].item),delete b[S]);return b},getNearGrid:function(t,e){return[t+1+"-"+(e-1),t+1+"-"+e,t+1+"-"+(e+1),t-1+"-"+(e-1),t-1+"-"+e,t-1+"-"+(e+1),t+"-"+(e-1),t+"-"+(e+1)]}},GL.GMVI.ClusterUtil.Grid={GridCell:function(t,e,n){n=n||100;var r=Math.ceil((e[1]/n).toFixed(2)),i=Math.ceil((e[0]/n).toFixed(2));this.size=n,this.minLng=t[0],this.perLng=(t[2]-t[0])/i,this.minLat=t[1],this.perLat=(t[3]-t[1])/r,this.grid={},this.add=function(t,e,n){var r=Math.ceil(((e-this.minLat)/this.perLat).toFixed(2)),i=Math.ceil(((t-this.minLng)/this.perLng).toFixed(2)),a=r+"-"+i;this.grid[a]=this.grid[a]||{item:[],count:0,center:[t,e]};var o=this.grid[a].count+1*n,s=[(this.grid[a].center[0]+t)/2,(this.grid[a].center[1]+e)/2];this.grid[a].count=o,this.grid[a].center=s,this.grid[a].item.push([t,e,n])}}},GL.GMVI.ClusterUtil.Util={generate:function(t){var e=t,n=[],r=[31.30115627,120.58105869],i="prepare "+t+"w test data cost";console.time(i);for(var a=0;a<e;a++){var o=r[1]+.5*Math.random(),s=r[0]+.5*Math.random();n.push([o,s,parseInt(1+100*Math.random())])}return console.timeEnd(i),n},getScale:function(t,e,n,r,i,a){return[3600*(e-t)/i,3600*(r-n)/a]},toPixel:function(t,e,n,r,i){return[3600*(e-r)/t[0],3600*(i-n)/t[1]]},toLnglat:function(t,e,n,r,i){return[e*t[0]/3600+r,i-n*t[1]/3600]}}},function(t,e,n){"use strict";function r(t,e,n,r,a,u,c,f,h){for(var g=f/(u-r),d=h/(c-a),p=(u-r)/f,y=(c-a)/h,v={},m=[],b=0;b<t.length;b++){var w=t[b],_=w.geometry;if(_.type==GL.GMVI.Geometry.Point){var M=_.coordinates,x=parseFloat(M[0]),G=parseFloat(M[1]);r<=x&&x<=u&&a<=G&&G<=c&&m.push(w)}}if(e>n){var k=[],P=[];return m.forEach(function(t){var e=t.geometry;if(e.type==GL.GMVI.Geometry.Point){var n=e.coordinates,i=parseFloat(n[0]),o=parseFloat(n[1]),s={count:1,center:[i,o],item:t},l=(i-r)*g,u=h-(o-a)*d;s.xy=[l,u],P.push(s)}}),v.clusters=k,v.unClusters=P,v}for(var O=[],I=[],S=[],C={},j=0,L=0;;){if((L+1)*o*y+l>=a&&O.push(L),(L+1)*o*y+l>=c)break;L++}for(;;){if((j+1)*o*p+s>=r&&I.push(j),(j+1)*o*p+s>=u)break;j++}for(var E=[],b=0;b<O.length;b++){for(var V=O[b],T=[],A=0;A<I.length;A++){var z=I[A],R={gridIndex:V+"-"+z};C[V]||(C[V]={}),C[V][z]=R,T.push([V,z])}E.push(T)}for(var b=0;b<m.length;b++){var w=m[b],_=w.geometry;if(_.type===GL.GMVI.Geometry.Point){var M=_.coordinates,x=parseFloat(M[0]),G=parseFloat(M[1]),V=parseInt((G-l)/(y*o)),z=parseInt((x-s)/(p*o));C[V]||console.error(V,"is error"),C[V][z]||console.error(z,"is error");var R=C[V][z];if(R.center)C[V][z].count=C[V][z].count+1;else{R.center=[x,G],R.count=1;var W=(x-r)*g,F=h-(G-a)*d;R.xy=[W,F],R.item=w,C[V][z]=R}}}E.forEach(function(t){t.forEach(function(t){var e=t[0],n=t[1];S.push(C[e][n])})});for(var B={},D=[];;){if(i(S,B,D,r,a,g,d,h,!1),0==D.length)break;S=S.concat(D),D=[]}for(var k=[],P=[],b=0;b<S.length;b++){var R=S[b];if(!B[R.gridIndex]){var Y=R.count;1==Y&&P.push(R),Y>1&&k.push(R)}}return v.clusters=k,v.unClusters=P,v}function i(t,e,n,r,i,a,o,s,l){for(var u=0;u<t.length;u++){var c=t[u],f=c.gridIndex;if(void 0==e[f]){var g=c.center;if(null!=g)for(var d=g[0],p=g[1],y=c.xy,v=y[0],m=y[1],b=0;b<t.length;b++){var w=t[b],_=w.gridIndex;if(void 0==e[_]&&f!==_&&void 0==e[f]){var M=w.center;if(null!=M){var x=M[0],G=M[1],k=w.xy,P=k[0],O=k[1];if(Math.sqrt(Math.pow(O-m,2)+Math.pow(P-v,2))<=50){var I={};I.center=[(d+x)/2,(p+G)/2],I.count=c.count+w.count,I.gridIndex=GL.GMVI.uuid();var S,C;if(l){var j=h.forward([d,p]),L=h.forward([x,G]);S=((j[0]+L[0])/2-r)*a,C=s-((j[1]+L[1])/2-i)*o}else S=((d+x)/2-r)*a,C=s-((p+G)/2-i)*o;I.xy=[S,C],n.push(I),e[f]=f,e[_]=_}}}}}}}function a(t,e,n,r,a,s,l,f,g){var d=h.forward([r,a]),p=h.forward([s,l]);r=d[0],a=d[1],s=p[0],l=p[1];var y=f/(s-r),v=g/(l-a),m=(s-r)/f,b=(l-a)/g,w={},_=[];if(t.forEach(function(t){var e=t.geometry;if(e.type==GL.GMVI.Geometry.Point){var n=e.mercatormeters,i=parseFloat(n[0]),o=parseFloat(n[1]);r<=i&&i<=s&&a<=o&&o<=l&&_.push(t)}}),e>n){var M=[],x=[];return _.forEach(function(t){var e=t.geometry;if(e.type==GL.GMVI.Geometry.Point){var n=e.coordinates,i=e.mercatormeters,o=parseFloat(n[0]),s=parseFloat(n[1]),l=i[0],u=i[1],c={count:1,center:[o,s],item:t},f=(l-r)*y,h=g-(u-a)*v;c.xy=[f,h],x.push(c)}}),w.clusters=M,w.unClusters=x,w}for(var G=[],k=[],P=[],O={},I=0,S=0;;){if((S+1)*o*b+c>=a&&G.push(S),(S+1)*o*b+c>=l)break;S++}for(;;){if((I+1)*o*m+u>=r&&k.push(I),(I+1)*o*m+u>=s)break;I++}for(var C=[],j=0;j<G.length;j++){for(var L=G[j],E=[],V=0;V<k.length;V++){var T=k[V],A={gridIndex:L+"-"+T};O[L]||(O[L]={}),O[L][T]=A,E.push([L,T])}C.push(E)}for(var j=0;j<_.length;j++){var z=_[j],R=z.geometry;if(R.type===GL.GMVI.Geometry.Point){var W=R.mercatormeters,F=R.coordinates,B=parseFloat(F[0]),D=parseFloat(F[1]),Y=W[0],q=W[1],L=parseInt((q-c)/(b*o)),T=parseInt((Y-u)/(m*o));O[L]||console.error(L,"is error"),O[L][T]||console.error(T,"is error");var A=O[L][T];if(A.center)O[L][T].count=O[L][T].count+1;else{A.center=[B,D],A.count=1;var X=(Y-r)*y,N=g-(q-a)*v;A.xy=[X,N],A.item=z,O[L][T]=A}}}C.forEach(function(t){t.forEach(function(t){var e=t[0],n=t[1];void 0!=O[e][n].center&&P.push(O[e][n])})});for(var U={},H=[];;){if(i(P,U,H,r,a,y,v,g,!0),0==H.length)break;P=P.concat(H),H=[]}for(var M=[],x=[],j=0;j<P.length;j++){var A=P[j];if(!U[A.gridIndex]){var J=A.count;1==J&&x.push(A),J>1&&M.push(A)}}return w.clusters=M,w.unClusters=x,w}var o=100,s=-179,l=-89,u=-19926188.851995967,c=-20037508.342789244,f=n(8),h=new f({size:256});GL.GMVI.SuperCluster=function(t,e,n,i,o,s,l,u,c,f){return"EPSG:3857"===f?a(t,e,n,i,o,s,l,u,c):r(t,e,n,i,o,s,l,u,c)}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a={municipalities:[{n:"北京",g:"116.395645,39.929986|12"},{n:"上海",g:"121.487899,31.249162|12"},{n:"天津",g:"117.210813,39.14393|12"},{n:"重庆",g:"106.530635,29.544606|12"}],provinces:[{n:"安徽",g:"117.216005,31.859252|8",cities:[{n:"合肥",g:"117.282699,31.866942|12"},{n:"安庆",g:"117.058739,30.537898|13"},{n:"蚌埠",g:"117.35708,32.929499|13"},{n:"亳州",g:"115.787928,33.871211|13"},{n:"巢湖",g:"117.88049,31.608733|13"},{n:"池州",g:"117.494477,30.660019|14"},{n:"滁州",g:"118.32457,32.317351|13"},{n:"阜阳",g:"115.820932,32.901211|13"},{n:"淮北",g:"116.791447,33.960023|13"},{n:"淮南",g:"117.018639,32.642812|13"},{n:"黄山",g:"118.29357,29.734435|13"},{n:"六安",g:"116.505253,31.755558|13"},{n:"马鞍山",g:"118.515882,31.688528|13"},{n:"宿州",g:"116.988692,33.636772|13"},{n:"铜陵",g:"117.819429,30.94093|14"},{n:"芜湖",g:"118.384108,31.36602|12"},{n:"宣城",g:"118.752096,30.951642|13"}]},{n:"福建",g:"117.984943,26.050118|8",cities:[{n:"福州",g:"119.330221,26.047125|12"},{n:"龙岩",g:"117.017997,25.078685|13"},{n:"南平",g:"118.181883,26.643626|13"},{n:"宁德",g:"119.542082,26.656527|14"},{n:"莆田",g:"119.077731,25.44845|13"},{n:"泉州",g:"118.600362,24.901652|12"},{n:"三明",g:"117.642194,26.270835|14"},{n:"厦门",g:"118.103886,24.489231|12"},{n:"漳州",g:"117.676205,24.517065|12"}]},{n:"甘肃",g:"102.457625,38.103267|6",cities:[{n:"兰州",g:"103.823305,36.064226|12"},{n:"白银",g:"104.171241,36.546682|13"},{n:"定西",g:"104.626638,35.586056|13"},{n:"甘南州",g:"102.917442,34.992211|14"},{n:"嘉峪关",g:"98.281635,39.802397|13"},{n:"金昌",g:"102.208126,38.516072|13"},{n:"酒泉",g:"98.508415,39.741474|13"},{n:"临夏州",g:"103.215249,35.598514|13"},{n:"陇南",g:"104.934573,33.39448|14"},{n:"平凉",g:"106.688911,35.55011|13"},{n:"庆阳",g:"107.644227,35.726801|13"},{n:"天水",g:"105.736932,34.584319|13"},{n:"武威",g:"102.640147,37.933172|13"},{n:"张掖",g:"100.459892,38.93932|13"}]},{n:"广东",g:"113.394818,23.408004|8",cities:[{n:"广州",g:"113.30765,23.120049|12"},{n:"潮州",g:"116.630076,23.661812|13"},{n:"东莞",g:"113.763434,23.043024|12"},{n:"佛山",g:"113.134026,23.035095|13"},{n:"河源",g:"114.713721,23.757251|12"},{n:"惠州",g:"114.410658,23.11354|12"},{n:"江门",g:"113.078125,22.575117|13"},{n:"揭阳",g:"116.379501,23.547999|13"},{n:"茂名",g:"110.931245,21.668226|13"},{n:"梅州",g:"116.126403,24.304571|13"},{n:"清远",g:"113.040773,23.698469|13"},{n:"汕头",g:"116.72865,23.383908|13"},{n:"汕尾",g:"115.372924,22.778731|14"},{n:"韶关",g:"113.594461,24.80296|13"},{n:"深圳",g:"114.025974,22.546054|12"},{n:"阳江",g:"111.97701,21.871517|14"},{n:"云浮",g:"112.050946,22.937976|13"},{n:"湛江",g:"110.365067,21.257463|13"},{n:"肇庆",g:"112.479653,23.078663|13"},{n:"中山",g:"113.42206,22.545178|12"},{n:"珠海",g:"113.562447,22.256915|13"}]},{n:"广西",g:"108.924274,23.552255|7",cities:[{n:"南宁",g:"108.297234,22.806493|12"},{n:"百色",g:"106.631821,23.901512|13"},{n:"北海",g:"109.122628,21.472718|13"},{n:"崇左",g:"107.357322,22.415455|14"},{n:"防城港",g:"108.351791,21.617398|15"},{n:"桂林",g:"110.26092,25.262901|12"},{n:"贵港",g:"109.613708,23.103373|13"},{n:"河池",g:"108.069948,24.699521|14"},{n:"贺州",g:"111.552594,24.411054|14"},{n:"来宾",g:"109.231817,23.741166|14"},{n:"柳州",g:"109.422402,24.329053|12"},{n:"钦州",g:"108.638798,21.97335|13"},{n:"梧州",g:"111.305472,23.485395|13"},{n:"玉林",g:"110.151676,22.643974|14"}]},{n:"贵州",g:"106.734996,26.902826|8",cities:[{n:"贵阳",g:"106.709177,26.629907|12"},{n:"安顺",g:"105.92827,26.228595|13"},{n:"毕节地区",g:"105.300492,27.302612|14"},{n:"六盘水",g:"104.852087,26.591866|13"},{n:"铜仁地区",g:"109.196161,27.726271|14"},{n:"遵义",g:"106.93126,27.699961|13"},{n:"黔西南州",g:"104.900558,25.095148|11"},{n:"黔东南州",g:"107.985353,26.583992|11"},{n:"黔南州",g:"107.523205,26.264536|11"}]},{n:"海南",g:"109.733755,19.180501|9",cities:[{n:"海口",g:"110.330802,20.022071|13"},{n:"白沙",g:"109.358586,19.216056|12"},{n:"保亭",g:"109.656113,18.597592|12"},{n:"昌江",g:"109.0113,19.222483|12"},{n:"儋州",g:"109.413973,19.571153|13"},{n:"澄迈",g:"109.996736,19.693135|13"},{n:"东方",g:"108.85101,18.998161|13"},{n:"定安",g:"110.32009,19.490991|13"},{n:"琼海",g:"110.414359,19.21483|13"},{n:"琼中",g:"109.861849,19.039771|12"},{n:"乐东",g:"109.062698,18.658614|12"},{n:"临高",g:"109.724101,19.805922|13"},{n:"陵水",g:"109.948661,18.575985|12"},{n:"三亚",g:"109.522771,18.257776|12"},{n:"屯昌",g:"110.063364,19.347749|13"},{n:"万宁",g:"110.292505,18.839886|13"},{n:"文昌",g:"110.780909,19.750947|13"},{n:"五指山",g:"109.51775,18.831306|13"}]},{n:"河北",g:"115.661434,38.61384|7",cities:[{n:"石家庄",g:"114.522082,38.048958|12"},{n:"保定",g:"115.49481,38.886565|13"},{n:"沧州",g:"116.863806,38.297615|13"},{n:"承德",g:"117.933822,40.992521|14"},{n:"邯郸",g:"114.482694,36.609308|13"},{n:"衡水",g:"115.686229,37.746929|13"},{n:"廊坊",g:"116.703602,39.518611|13"},{n:"秦皇岛",g:"119.604368,39.945462|12"},{n:"唐山",g:"118.183451,39.650531|13"},{n:"邢台",g:"114.520487,37.069531|13"},{n:"张家口",g:"114.893782,40.811188|13"}]},{n:"河南",g:"113.486804,34.157184|7",cities:[{n:"郑州",g:"113.649644,34.75661|12"},{n:"安阳",g:"114.351807,36.110267|12"},{n:"鹤壁",g:"114.29777,35.755426|13"},{n:"焦作",g:"113.211836,35.234608|13"},{n:"开封",g:"114.351642,34.801854|13"},{n:"洛阳",g:"112.447525,34.657368|12"},{n:"漯河",g:"114.046061,33.576279|13"},{n:"南阳",g:"112.542842,33.01142|13"},{n:"平顶山",g:"113.300849,33.745301|13"},{n:"濮阳",g:"115.026627,35.753298|12"},{n:"三门峡",g:"111.181262,34.78332|13"},{n:"商丘",g:"115.641886,34.438589|13"},{n:"新乡",g:"113.91269,35.307258|13"},{n:"信阳",g:"114.085491,32.128582|13"},{n:"许昌",g:"113.835312,34.02674|13"},{n:"周口",g:"114.654102,33.623741|13"},{n:"驻马店",g:"114.049154,32.983158|13"}]},{n:"黑龙江",g:"128.047414,47.356592|6",cities:[{n:"哈尔滨",g:"126.657717,45.773225|12"},{n:"大庆",g:"125.02184,46.596709|12"},{n:"大兴安岭地区",g:"124.196104,51.991789|10"},{n:"鹤岗",g:"130.292472,47.338666|13"},{n:"黑河",g:"127.50083,50.25069|14"},{n:"鸡西",g:"130.941767,45.32154|13"},{n:"佳木斯",g:"130.284735,46.81378|12"},{n:"牡丹江",g:"129.608035,44.588521|13"},{n:"七台河",g:"131.019048,45.775005|14"},{n:"齐齐哈尔",g:"123.987289,47.3477|13"},{n:"双鸭山",g:"131.171402,46.655102|13"},{n:"绥化",g:"126.989095,46.646064|13"},{n:"伊春",g:"128.910766,47.734685|14"}]},{n:"湖北",g:"112.410562,31.209316|8",cities:[{n:"武汉",g:"114.3162,30.581084|12"},{n:"鄂州",g:"114.895594,30.384439|14"},{n:"恩施",g:"109.517433,30.308978|14"},{n:"黄冈",g:"114.906618,30.446109|14"},{n:"黄石",g:"115.050683,30.216127|13"},{n:"荆门",g:"112.21733,31.042611|13"},{n:"荆州",g:"112.241866,30.332591|12"},{n:"潜江",g:"112.768768,30.343116|13"},{n:"神农架林区",g:"110.487231,31.595768|13"},{n:"十堰",g:"110.801229,32.636994|13"},{n:"随州",g:"113.379358,31.717858|13"},{n:"天门",g:"113.12623,30.649047|13"},{n:"仙桃",g:"113.387448,30.293966|13"},{n:"咸宁",g:"114.300061,29.880657|13"},{n:"襄阳",g:"112.176326,32.094934|12"},{n:"孝感",g:"113.935734,30.927955|13"},{n:"宜昌",g:"111.310981,30.732758|13"}]},{n:"湖南",g:"111.720664,27.695864|7",cities:[{n:"长沙",g:"112.979353,28.213478|12"},{n:"常德",g:"111.653718,29.012149|12"},{n:"郴州",g:"113.037704,25.782264|13"},{n:"衡阳",g:"112.583819,26.898164|13"},{n:"怀化",g:"109.986959,27.557483|13"},{n:"娄底",g:"111.996396,27.741073|13"},{n:"邵阳",g:"111.461525,27.236811|13"},{n:"湘潭",g:"112.935556,27.835095|13"},{n:"湘西州",g:"109.745746,28.317951|14"},{n:"益阳",g:"112.366547,28.588088|13"},{n:"永州",g:"111.614648,26.435972|13"},{n:"岳阳",g:"113.146196,29.378007|13"},{n:"张家界",g:"110.48162,29.124889|13"},{n:"株洲",g:"113.131695,27.827433|13"}]},{n:"江苏",g:"119.368489,33.013797|8",cities:[{n:"南京",g:"118.778074,32.057236|12"},{n:"常州",g:"119.981861,31.771397|12"},{n:"淮安",g:"119.030186,33.606513|12"},{n:"连云港",g:"119.173872,34.601549|12"},{n:"南通",g:"120.873801,32.014665|12"},{n:"苏州",g:"120.619907,31.317987|12"},{n:"宿迁",g:"118.296893,33.95205|13"},{n:"泰州",g:"119.919606,32.476053|13"},{n:"无锡",g:"120.305456,31.570037|12"},{n:"徐州",g:"117.188107,34.271553|12"},{n:"盐城",g:"120.148872,33.379862|12"},{n:"扬州",g:"119.427778,32.408505|13"},{n:"镇江",g:"119.455835,32.204409|13"}]},{n:"江西",g:"115.676082,27.757258|7",cities:[{n:"南昌",g:"115.893528,28.689578|12"},{n:"抚州",g:"116.360919,27.954545|13"},{n:"赣州",g:"114.935909,25.845296|13"},{n:"吉安",g:"114.992039,27.113848|13"},{n:"景德镇",g:"117.186523,29.303563|12"},{n:"九江",g:"115.999848,29.71964|13"},{n:"萍乡",g:"113.859917,27.639544|13"},{n:"上饶",g:"117.955464,28.457623|13"},{n:"新余",g:"114.947117,27.822322|13"},{n:"宜春",g:"114.400039,27.81113|13"},{n:"鹰潭",g:"117.03545,28.24131|13"}]},{n:"吉林",g:"126.262876,43.678846|7",cities:[{n:"长春",g:"125.313642,43.898338|12"},{n:"白城",g:"122.840777,45.621086|13"},{n:"白山",g:"126.435798,41.945859|13"},{n:"吉林市",g:"126.564544,43.871988|12"},{n:"辽源",g:"125.133686,42.923303|13"},{n:"四平",g:"124.391382,43.175525|12"},{n:"松原",g:"124.832995,45.136049|13"},{n:"通化",g:"125.94265,41.736397|13"},{n:"延边",g:"129.485902,42.896414|13"}]},{n:"辽宁",g:"122.753592,41.6216|8",cities:[{n:"沈阳",g:"123.432791,41.808645|12"},{n:"鞍山",g:"123.007763,41.118744|13"},{n:"本溪",g:"123.778062,41.325838|12"},{n:"朝阳",g:"120.446163,41.571828|13"},{n:"大连",g:"121.593478,38.94871|12"},{n:"丹东",g:"124.338543,40.129023|12"},{n:"抚顺",g:"123.92982,41.877304|12"},{n:"阜新",g:"121.660822,42.01925|14"},{n:"葫芦岛",g:"120.860758,40.74303|13"},{n:"锦州",g:"121.147749,41.130879|13"},{n:"辽阳",g:"123.172451,41.273339|14"},{n:"盘锦",g:"122.073228,41.141248|13"},{n:"铁岭",g:"123.85485,42.299757|13"},{n:"营口",g:"122.233391,40.668651|13"}]},{n:"内蒙古",g:"114.415868,43.468238|5",cities:[{n:"呼和浩特",g:"111.660351,40.828319|12"},{n:"阿拉善盟",g:"105.695683,38.843075|14"},{n:"包头",g:"109.846239,40.647119|12"},{n:"巴彦淖尔",g:"107.423807,40.76918|12"},{n:"赤峰",g:"118.930761,42.297112|12"},{n:"鄂尔多斯",g:"109.993706,39.81649|12"},{n:"呼伦贝尔",g:"119.760822,49.201636|12"},{n:"通辽",g:"122.260363,43.633756|12"},{n:"乌海",g:"106.831999,39.683177|13"},{n:"乌兰察布",g:"113.112846,41.022363|12"},{n:"锡林郭勒盟",g:"116.02734,43.939705|11"},{n:"兴安盟",g:"122.048167,46.083757|11"}]},{n:"宁夏",g:"106.155481,37.321323|8",cities:[{n:"银川",g:"106.206479,38.502621|12"},{n:"固原",g:"106.285268,36.021523|13"},{n:"石嘴山",g:"106.379337,39.020223|13"},{n:"吴忠",g:"106.208254,37.993561|14"},{n:"中卫",g:"105.196754,37.521124|14"}]},{n:"青海",g:"96.202544,35.499761|7",cities:[{n:"西宁",g:"101.767921,36.640739|12"},{n:"果洛州",g:"100.223723,34.480485|11"},{n:"海东地区",g:"102.085207,36.51761|11"},{n:"海北州",g:"100.879802,36.960654|11"},{n:"海南州",g:"100.624066,36.284364|11"},{n:"海西州",g:"97.342625,37.373799|11"},{n:"黄南州",g:"102.0076,35.522852|11"},{n:"玉树州",g:"97.013316,33.00624|14"}]},{n:"山东",g:"118.527663,36.09929|8",cities:[{n:"济南",g:"117.024967,36.682785|12"},{n:"滨州",g:"117.968292,37.405314|12"},{n:"东营",g:"118.583926,37.487121|12"},{n:"德州",g:"116.328161,37.460826|12"},{n:"菏泽",g:"115.46336,35.26244|13"},{n:"济宁",g:"116.600798,35.402122|13"},{n:"莱芜",g:"117.684667,36.233654|13"},{n:"聊城",g:"115.986869,36.455829|12"},{n:"临沂",g:"118.340768,35.072409|12"},{n:"青岛",g:"120.384428,36.105215|12"},{n:"日照",g:"119.50718,35.420225|12"},{n:"泰安",g:"117.089415,36.188078|13"},{n:"威海",g:"122.093958,37.528787|13"},{n:"潍坊",g:"119.142634,36.716115|12"},{n:"烟台",g:"121.309555,37.536562|12"},{n:"枣庄",g:"117.279305,34.807883|13"},{n:"淄博",g:"118.059134,36.804685|12"}]},{n:"山西",g:"112.515496,37.866566|7",cities:[{n:"太原",g:"112.550864,37.890277|12"},{n:"长治",g:"113.120292,36.201664|12"},{n:"大同",g:"113.290509,40.113744|12"},{n:"晋城",g:"112.867333,35.499834|13"},{n:"晋中",g:"112.738514,37.693362|13"},{n:"临汾",g:"111.538788,36.099745|13"},{n:"吕梁",g:"111.143157,37.527316|14"},{n:"朔州",g:"112.479928,39.337672|13"},{n:"忻州",g:"112.727939,38.461031|12"},{n:"阳泉",g:"113.569238,37.869529|13"},{n:"运城",g:"111.006854,35.038859|13"}]},{n:"陕西",g:"109.503789,35.860026|7",cities:[{n:"西安",g:"108.953098,34.2778|12"},{n:"安康",g:"109.038045,32.70437|13"},{n:"宝鸡",g:"107.170645,34.364081|12"},{n:"汉中",g:"107.045478,33.081569|13"},{n:"商洛",g:"109.934208,33.873907|13"},{n:"铜川",g:"108.968067,34.908368|13"},{n:"渭南",g:"109.483933,34.502358|13"},{n:"咸阳",g:"108.707509,34.345373|13"},{n:"延安",g:"109.50051,36.60332|13"},{n:"榆林",g:"109.745926,38.279439|12"}]},{n:"四川",g:"102.89916,30.367481|7",cities:[{n:"成都",g:"104.067923,30.679943|12"},{n:"阿坝州",g:"102.228565,31.905763|15"},{n:"巴中",g:"106.757916,31.869189|14"},{n:"达州",g:"107.494973,31.214199|14"},{n:"德阳",g:"104.402398,31.13114|13"},{n:"甘孜州",g:"101.969232,30.055144|15"},{n:"广安",g:"106.63572,30.463984|13"},{n:"广元",g:"105.819687,32.44104|13"},{n:"乐山",g:"103.760824,29.600958|13"},{n:"凉山州",g:"102.259591,27.892393|14"},{n:"泸州",g:"105.44397,28.89593|14"},{n:"南充",g:"106.105554,30.800965|13"},{n:"眉山",g:"103.84143,30.061115|13"},{n:"绵阳",g:"104.705519,31.504701|12"},{n:"内江",g:"105.073056,29.599462|13"},{n:"攀枝花",g:"101.722423,26.587571|14"},{n:"遂宁",g:"105.564888,30.557491|12"},{n:"雅安",g:"103.009356,29.999716|13"},{n:"宜宾",g:"104.633019,28.769675|13"},{n:"资阳",g:"104.63593,30.132191|13"},{n:"自贡",g:"104.776071,29.359157|13"}]},{n:"西藏",g:"89.137982,31.367315|6",cities:[{n:"拉萨",g:"91.111891,29.662557|13"},{n:"阿里地区",g:"81.107669,30.404557|11"},{n:"昌都地区",g:"97.185582,31.140576|15"},{n:"林芝地区",g:"94.349985,29.666941|11"},{n:"那曲地区",g:"92.067018,31.48068|14"},{n:"日喀则地区",g:"88.891486,29.269023|14"},{n:"山南地区",g:"91.750644,29.229027|11"}]},{n:"新疆",g:"85.614899,42.127001|6",cities:[{n:"乌鲁木齐",g:"87.564988,43.84038|12"},{n:"阿拉尔",g:"81.291737,40.61568|13"},{n:"阿克苏地区",g:"80.269846,41.171731|12"},{n:"阿勒泰地区",g:"88.137915,47.839744|13"},{n:"巴音郭楞",g:"86.121688,41.771362|12"},{n:"博尔塔拉州",g:"82.052436,44.913651|11"},{n:"昌吉州",g:"87.296038,44.007058|13"},{n:"哈密地区",g:"93.528355,42.858596|13"},{n:"和田地区",g:"79.930239,37.116774|13"},{n:"喀什地区",g:"75.992973,39.470627|12"},{n:"克拉玛依",g:"84.88118,45.594331|13"},{n:"克孜勒苏州",g:"76.137564,39.750346|11"},{n:"石河子",g:"86.041865,44.308259|13"},{n:"塔城地区",g:"82.974881,46.758684|12"},{n:"图木舒克",g:"79.198155,39.889223|13"},{n:"吐鲁番地区",g:"89.181595,42.96047|13"},{n:"五家渠",g:"87.565449,44.368899|13"},{n:"伊犁州",g:"81.297854,43.922248|11"}]},{n:"云南",g:"101.592952,24.864213|7",cities:[{n:"昆明",g:"102.714601,25.049153|12"},{n:"保山",g:"99.177996,25.120489|13"},{n:"楚雄州",g:"101.529382,25.066356|13"},{n:"大理州",g:"100.223675,25.5969|14"},{n:"德宏州",g:"98.589434,24.44124|14"},{n:"迪庆州",g:"99.713682,27.831029|14"},{n:"红河州",g:"103.384065,23.367718|11"},{n:"丽江",g:"100.229628,26.875351|13"},{n:"临沧",g:"100.092613,23.887806|14"},{n:"怒江州",g:"98.859932,25.860677|14"},{n:"普洱",g:"100.980058,22.788778|14"},{n:"曲靖",g:"103.782539,25.520758|12"},{n:"昭通",g:"103.725021,27.340633|13"},{n:"文山",g:"104.089112,23.401781|14"},{n:"西双版纳",g:"100.803038,22.009433|13"},{n:"玉溪",g:"102.545068,24.370447|13"}]},{n:"浙江",g:"119.957202,29.159494|8",cities:[{n:"杭州",g:"120.219375,30.259244|12"},{n:"湖州",g:"120.137243,30.877925|12"},{n:"嘉兴",g:"120.760428,30.773992|13"},{n:"金华",g:"119.652576,29.102899|12"},{n:"丽水",g:"119.929576,28.4563|13"},{n:"宁波",g:"121.579006,29.885259|12"},{n:"衢州",g:"118.875842,28.95691|12"},{n:"绍兴",g:"120.592467,30.002365|13"},{n:"台州",g:"121.440613,28.668283|13"},{n:"温州",g:"120.690635,28.002838|12"},{n:"舟山",g:"122.169872,30.03601|13"}]}],other:[{n:"香港",g:"114.186124,22.293586|11"},{n:"澳门",g:"113.557519,22.204118|13"},{n:"台湾",g:"120.961454,23.80406|8"}]},o=function(){function t(){r(this,t),this.cityCenter=a}return i(t,[{key:"getCenter",value:function(t){var e=t.split("|");return e[0]=e[0].split(","),{lng:parseFloat(e[0][0]),lat:parseFloat(e[0][1])}}},{key:"getCenterByCityName",value:function(t){var e=this.cityCenter;t&&(t=t.toString().trim());for(var n=0;n<e.municipalities.length;n++){if(e.municipalities[n].n==t)return this.getCenter(e.municipalities[n].g)}for(var r=e.provinces,n=0;n<r.length;n++){if(r[n].n===t)return this.getCenter(r[n].g);for(var i=r[n].cities,a=0;a<i.length;a++){if(i[a].n===t)return this.getCenter(i[a].g)}}return null}}]),t}();e.default=GL.GMVI.CityCenterUtil=new o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){return t.x*e.x+t.y*e.y}function e(t){return{x:x[t.target].x-x[t.source].x,y:x[t.target].y-x[t.source].y}}function n(t){return Math.sqrt(Math.pow(x[t.source].x-x[t.target].x,2)+Math.pow(x[t.source].y-x[t.target].y,2))}function r(t){return Math.sqrt(Math.pow(t.source.x-t.target.x,2)+Math.pow(t.source.y-t.target.y,2))}function i(t){return{x:(x[t.source].x+x[t.target].x)/2,y:(x[t.source].y+x[t.target].y)/2}}function a(t){for(var e=0,n=1;n<O[t].length;n++){e+=o(O[t][n],O[t][n-1])}return e}function o(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function s(t,e){var n=Math.sqrt((e.target.x-e.source.x)*(e.target.x-e.source.x)+(e.target.y-e.source.y)*(e.target.y-e.source.y)),r=((e.source.y-t.y)*(e.source.y-e.target.y)-(e.source.x-t.x)*(e.target.x-e.source.x))/(n*n);return{x:e.source.x+r*(e.target.x-e.source.x),y:e.source.y+r*(e.target.y-e.source.y)}}function l(){for(var t=0;t<G.length;t++)1==C?O[t]=[]:(O[t]=[],O[t].push(x[G[t].source]),O[t].push(x[G[t].target]))}function u(){for(var t=0;t<G.length;t++)k[t]=[]}function c(t){for(var e=[],n=0;n<t.length;n++)x[t[n].source].x!=x[t[n].target].x&&x[t[n].source].y!=x[t[n].target].y&&e.push(t[n]);return e}function f(t,e,n){var r=O[t][e-1],i=O[t][e+1],a=O[t][e],o=r.x-a.x+i.x-a.x,s=r.y-a.y+i.y-a.y;return o*=n,s*=n,{x:o,y:s}}function h(t,e,n){for(var i={x:0,y:0},a=k[t],o=0;o<a.length;o++){var s={x:O[a[o]][e].x-O[t][e].x,y:O[a[o]][e].y-O[t][e].y};if(Math.abs(s.x)>A||Math.abs(s.y)>A){var l=1/Math.pow(r({source:O[a[o]][e],target:O[t][e]}),1);i.x+=s.x*l,i.y+=s.y*l}}return i}function g(t,e,r){for(var i=I/(n(G[t])*(e+1)),a=[{x:0,y:0}],o=1;o<e+1;o++){var s={x:0,y:0},l=f(t,o,i),u=h(t,o,r);s.x=r*(l.x+u.x),s.y=r*(l.y+u.y),a.push(s)}return a.push({x:0,y:0}),a}function d(t){for(var e=0;e<G.length;e++)if(1==t)O[e].push(x[G[e].source]),O[e].push(i(G[e])),O[e].push(x[G[e].target]);else{var n=a(e),r=n/(t+1),s=r,l=[];l.push(x[G[e].source]);for(var u=1;u<O[e].length;u++){for(var c=o(O[e][u],O[e][u-1]);c>s;){var f=s/c,h=O[e][u-1].x,g=O[e][u-1].y;h+=f*(O[e][u].x-O[e][u-1].x),g+=f*(O[e][u].y-O[e][u-1].y),l.push({x:h,y:g}),c-=s,s=r}s-=c}l.push(x[G[e].target]),O[e]=l}}function p(r,i){return Math.abs(t(e(r),e(i))/(n(r)*n(i)))}function y(t,e){var r=(n(t)+n(e))/2;return 2/(r/Math.min(n(t),n(e))+Math.max(n(t),n(e))/r)}function v(t,e){var r=(n(t)+n(e))/2;return r/(r+o({x:(x[t.source].x+x[t.target].x)/2,y:(x[t.source].y+x[t.target].y)/2},{x:(x[e.source].x+x[e.target].x)/2,y:(x[e.source].y+x[e.target].y)/2}))}function m(t,e){var n=s(x[e.source],{source:x[t.source],target:x[t.target]}),r=s(x[e.target],{source:x[t.source],target:x[t.target]}),i={x:(n.x+r.x)/2,y:(n.y+r.y)/2},a={x:(x[t.source].x+x[t.target].x)/2,y:(x[t.source].y+x[t.target].y)/2};return Math.max(0,1-2*o(a,i)/o(n,r))}function b(t,e){return Math.min(m(t,e),m(e,t))}function w(t,e){return p(t,e)*y(t,e)*v(t,e)*b(t,e)}function _(t,e){return w(t,e)>=T}function M(){for(var t=0;t<G.length-1;t++)for(var e=t+1;e<G.length;e++)t!=e&&_(G[t],G[e])&&(k[t].push(e),k[e].push(t))}var x={},G=[],k=[],O=[],I=.1,S=.1,C=1,j=2,L=6,E=70,V=.6666667,T=.6,A=1e-8,z=function(){var t=S,e=E,n=C;l(),u(),d(n),M();for(var r=0;r<L;r++){for(var i=0;i<e;i++){for(var a=[],o=0;o<G.length;o++)a[o]=g(o,n,t);for(var s=0;s<G.length;s++)for(var c=0;c<n+1;c++)O[s][c].x+=a[s][c].x,O[s][c].y+=a[s][c].y}t/=2,n*=2,e*=V,d(n)}return O};return z.nodes=function(t){return 0==arguments.length?x:(x=t,z)},z.edges=function(t){return 0==arguments.length?G:(G=c(t),z)},z.bundling_stiffness=function(t){return 0==arguments.length?I:(I=t,z)},z.step_size=function(t){return 0==arguments.length?S:(S=t,z)},z.cycles=function(t){return 0==arguments.length?L:(L=t,z)},z.iterations=function(t){return 0==arguments.length?E:(E=t,z)},z.iterations_rate=function(t){return 0==arguments.length?V:(V=t,z)},z.subdivision_points_seed=function(t){return 0==arguments.length?P:(P=t,z)},z.subdivision_rate=function(t){return 0==arguments.length?j:(j=t,z)},z.compatbility_threshold=function(t){return 0==arguments.length?compatbility_threshold:(T=t,z)},z};e.default=GL.GMVI.ForceEdgeBundlingUtil=r},function(t,e,n){"use strict";function r(t){for(var e=[],n=0;n<t.length-1;n++){var r=i(t[n],t[n+1]);r&&r.length>0&&(e=e.concat(r))}return e}function i(t,e){if(!t||!e)return null;var n,r,i,a,o,s,l=function(t){return 1-2*t+t*t},u=function(t){return 2*t-2*t*t},c=function(t){return t*t},f=[],h=0,g=0;if(void 0===e)return void(void 0!==f&&(f=[]));var d=parseFloat(t.lat),p=parseFloat(e.lat),y=parseFloat(t.lng),v=parseFloat(e.lng);for(v>y&&parseFloat(v-y)>180&&y<0&&(y=parseFloat(360+y)),y>v&&parseFloat(y-v)>180&&v<0&&(v=parseFloat(360+v)),0,s=0,p==d?(n=0,r=y-v):v==y?(n=Math.PI/2,r=d-p):(n=Math.atan((p-d)/(v-y)),r=(p-d)/Math.sin(n)),0==s&&(s=n+Math.PI/5),i=r/2,o=i*Math.cos(s)+y,a=i*Math.sin(s)+d,h=0;h<41;h++)f.push([y*l(g)+o*u(g)+v*c(g),d*l(g)+a*u(g)+p*c(g)]),g+=.025;return f}Object.defineProperty(e,"__esModule",{value:!0});var a={getPoints:r};e.default=GL.GMVI.CurveUtil=a},function(t,e,n){"use strict";n(21);GL.GMVI.Extend=function(t,e){for(var n in e)t[n]=e[n];return t}},function(t,e){e.endianness=function(){return"LE"},e.hostname=function(){return"undefined"!=typeof location?location.hostname:""},e.loadavg=function(){return[]},e.uptime=function(){return 0},e.freemem=function(){return Number.MAX_VALUE},e.totalmem=function(){return Number.MAX_VALUE},e.cpus=function(){return[]},e.type=function(){return"Browser"},e.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},e.networkInterfaces=e.getNetworkInterfaces=function(){return{}},e.arch=function(){return"javascript"},e.platform=function(){return"browser"},e.tmpdir=e.tmpDir=function(){return"/tmp"},e.EOL="\n",e.homedir=function(){return"/"}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(5),c=r(u),f=n(23),h=r(f),g=n(24),d=r(g),p=n(25),y=r(p),v=n(1),m=r(v),b=n(26),w=r(b),_=n(27),M=r(_),x=n(28),G=r(x),k=n(29),P=r(k),O=n(30),I=r(O),S=n(32),C=r(S),j=n(33),L=r(j),E=n(34),V=r(E),T=n(36),A=r(T),z=n(38),R=r(z),W=n(39),F=r(W),B=n(40),D=r(B),Y=n(41),q=r(Y),X=n(42),N=r(X),U=n(43),H=r(U),J=n(44),Z=r(J),K=n(45),Q=r(K),$=n(8),tt=new $({size:256}),et=window.maptalks;if(!et)throw new Error("not find maptalks lib");var nt={},rt=function(t){function e(t,n,r){if(i(this,e),!n instanceof GL.GMVI.DataSet)throw new Error("dataset is error");var o=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));return o.data=n.get(),o._initOptions(r),o.data=o._filterData(o.data),o.inited=!1,o}return o(e,t),l(e,[{key:"getData",value:function(){return this.data||[]}},{key:"getDatas",value:function(){return this.getData()}},{key:"isEmpty",value:function(){return!this.data.length}},{key:"clear",value:function(){return this.data=[],this._clearTime(),this.fire("clear"),this.redraw(),this}},{key:"toJSON",value:function(t){t||(t={});var e={type:this.getJSONType(),id:this.getId(),options:this.config()},n=this.getData();if(t.clipExtent){var r=new et.Extent(t.clipExtent),i=this._getHeatRadius();i&&(r=r._expand(i));for(var a=[],o=0,s=n.length;o<s;o++)r.contains(new et.Coordinate(n[o][0],n[o][1]))&&a.push(n[o]);e.data=a}else e.data=n;return e}},{key:"setOption",value:function(t){this._initOptions(t),this._filterData(this.data),this._init(),this.redraw()}},{key:"redraw",value:function(){var t=this._getRenderer();return t&&t.setToRedraw(),this}},{key:"getRenderer",value:function(){return this._getRenderer()}},{key:"onRemove",value:function(t){if(t=t||this.getMap(),this.eventMap)for(var e in this.eventMap)t.off(e,this.eventMap[e]);this._clearTime(),this.inited=!1}},{key:"resetDatas",value:function(t){this.data=this._filterData(t.get()),this.redraw()}},{key:"addDatas",value:function(t){this.data=this.data.concat(this._filterData(t.get())),this.redraw()}},{key:"removeData",value:function(t){if(Array.isArray(t)&&t.length>0){var e={};t.forEach(function(t,n){var r=t.id;r&&(e[r]=t)});for(var n=[],r=0,i=this.data.length;r<i;r++){var a=this.data[r].id;a&&e[a]||n.push(this.data[r])}this.data=n,this.redraw()}if(t&&"object"==(void 0===t?"undefined":s(t))){var n=[],o=t.id;if(!o)return this;for(var r=0,i=this.data.length;r<i;r++){var a=this.data[r].id;o!=a&&n.push(this.data[r])}this.data=n,this.redraw()}return this}},{key:"remvoeDatas",value:function(t){this.removeData(t)}},{key:"on",value:function(t,e){if("click"!=t);else{if(!t||!e)throw new Error("eventType or callback is error");var n=this,r=function(t){n._clickEvent(t,e)};this.eventMap[t]=r,this._initEvent()}}},{key:"off",value:function(t,e){var n=this.eventMap[t];return this.getMap().off(t,n),delete this.eventMap[t],this}},{key:"identify",value:function(t,e){return this._clickEvent(t,e)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"setCanvas",value:function(t){this._canvas=t}},{key:"getContext",value:function(){return this._context}},{key:"setContext",value:function(t){this._context=t}},{key:"_init",value:function(){this._initCanvasType(),this._animationCall(),this._initEvent(),this.inited=!0,this._reset()}},{key:"_reset",value:function(){var t=this.getMap();if(!t)throw new Error("请现将该图层添加到地图上");var e=t.distanceToPixel(100,100),n=e.width,r=e.height;this.lengthAverage=Math.sqrt(Math.pow(n,2)+Math.pow(r,2))/Math.sqrt(2*Math.pow(100,2)),this._drawCanvasLayer()}},{key:"_lnglatToPixel",value:function(t,e){if(!Array.isArray(t))throw console.error(t),new Error("lnglat is error");var n=(this.devicePixelRatio=et.Browser.retina?2:1,this.getMap()),r=n.getProjection(),i=[];if(Array.isArray(t[0]))for(var a=0;a<t.length;a++){var o=t[a],s=o[0],l=o[1],u=r.project(new et.Coordinate(s,l));u=n._prjToContainerPoint(u),i.push([u.x,u.y])}else{var s=t[0],l=t[1],u=r.project(new et.Coordinate(s,l));u=n._prjToContainerPoint(u),i=[u.x,u.y]}return i}},{key:"_drawCanvasLayer",value:function(){var t=this,e=this.getRenderer(),n=[],r=this.time;if(this.isEnabledTime){if(void 0==this.time)return;var i=this.animationOptions.trails||5;for(var a in this.data){var o=this.data[a];r&&o.time>r-i&&o.time<r&&n.push(o)}var s=this.getContext();s.save(),s.globalCompositeOperation="destination-out",s.fillStyle="rgba(0, 0, 0, .1)",s.fillRect(0,0,s.canvas.width,s.canvas.height),s.restore(),e.completeRender()}else{n=this.data;var s=this.getContext();s.clearRect(0,0,s.canvas.width,s.canvas.height)}for(var l,u,c,f,h,g,d=[],p=0;p<n.length;p++)if(l=n[p].geometry,c=l.type,u=l.coordinates,h=l.radius,g=n[p].geometry.mercatormeters,f=n[p],c==GL.GMVI.Geometry.Point||c==GL.GMVI.Geometry.Rectangle)f.xy=this._lnglatToPixel(u,g),l.width&&(f.width=this.lengthAverage*l.width),l.height&&(f.height=this.lengthAverage*l.height),d.push(f);else if(c==GL.GMVI.Geometry.Circle){var y=new Q.default(u,h),v=y.toArray();f.xy=this._lnglatToPixel(v),d.push(f)}else{for(var m=[],b=0;b<u.length;b++){var w=u[b];m.push(this._lnglatToPixel(w,g[b]))}f.xy=m,d.push(f)}var _=new GL.GMVI.DataSet(d);if(this.options.draw!=GL.GMVI.Cluster)this.options.noRender||this.canvasType.draw(this.getContext(),_,this.options,e),this.options.callback&&this.options.callback(_);else{for(var l,u,c,M=[],p=0;p<n.length;p++)if(l=n[p].geometry,(c=l.type)==GL.GMVI.Geometry.Point){u=l.coordinates;var x=parseFloat(u[0]),G=parseFloat(u[1]);M.push([x,G,1,n[p]])}var k=this.getMap(),P=k.getSize(),O=k.getZoom(),I=k.getExtent(),S=(k.getCenter(),this.options.maxClusterLv||k.getMaxZoom()),C=I.xmin,j=I.ymin,L=I.xmax,E=I.ymax,V=P.width,T=P.height,A=k.getSpatialReference()._projection.code;(L<C||E<j)&&(C=-180,L=180,j=-90,E=90);var z=GL.GMVI.SuperCluster(this.data,O,S,C,j,L,E,V,T,A);if(z){var R=[],W=[];(z.unClusters||[]).forEach(function(e){var n=t._lnglatToPixel(e.center);e.xy=n,e.item.xy=n,R.push(e.item),W.push(e)});var F=z.clusters||[],B=[];this.unClustersData=R,F.forEach(function(e){var n=t._lnglatToPixel(e.center);e.xy=n,B.push(e)}),z.clusters=B,z.unClusters=W,this.canvasType.draw(this.getContext(),z,this.options)}}}},{key:"_filterData",value:function(t){var e=this,n=e.options.draw;if(n==GL.GMVI.Bubble||n==GL.GMVI.Intensity||n==GL.GMVI.Category||n==GL.GMVI.Choropleth||n==GL.GMVI.Simple||n==GL.GMVI.Effect)for(var r=0;r<t.length;r++){var i=t[r];n==GL.GMVI.Bubble&&(t[r]._size=e.intensity.getSize(i.count)),n==GL.GMVI.Intensity&&(t[r].geometry.type===GL.GMVI.Geometry.LineString||t[r].geometry.type===GL.GMVI.Geometry.Polyline?t[r].strokeStyle=e.intensity.getColor(i.count):t[r].fillStyle=e.intensity.getColor(i.count)),n==GL.GMVI.Category&&(t[r].geometry.type===GL.GMVI.Geometry.LineString||t[r].geometry.type===GL.GMVI.Geometry.Polyline?t[r].strokeStyle=e.category.get(i.count):t[r].fillStyle=e.category.get(i.count)),n==GL.GMVI.Choropleth&&(t[r].geometry.type===GL.GMVI.Geometry.LineString||t[r].geometry.type===GL.GMVI.Geometry.Polyline?t[r].strokeStyle=e.choropleth.get(i.count):t[r].fillStyle=e.choropleth.get(i.count)),n==GL.GMVI.Effect&&(t[r].size=e.options.size||15,t[r]._size=t[r].size*Math.random(),t[r].strokeStyle=e.choropleth.get(i.count))}for(var r=0,a=t.length;r<a;r++){var o=[],s=t[r].geometry.coordinates;if(Array.isArray(s[0]))for(var l=0;l<s.length;l++){var u=tt.forward(s[l]);o.push(u)}else o=tt.forward(s);t[r].geometry.mercatormeters=o}return t}},{key:"_animationCall",value:function(){var t=this,e=this.getMap();if("time"==t.options.draw||this.isEnabledTime){var n=t.animator=new h.default(function(e){t.time=e,t._drawCanvasLayer.bind(t).call(e)},{steps:t.animationOptions.steps||100,stepsRange:t.animationOptions.stepsRange||100,animationDuration:t.animationOptions.duration||10});n.start(),e.addEventListener("movestart",function(){n.pause()}),e.addEventListener("moveend",function(){n.start()})}}},{key:"_initCanvasType",value:function(){var t;switch(this.options.draw){case GL.GMVI.Heatmap:t=new I.default;break;case GL.GMVI.Grid:t=new P.default;break;case GL.GMVI.Honeycomb:t=new C.default;break;case GL.GMVI.Text:t=new N.default;break;case GL.GMVI.Icon:t=new L.default;break;case GL.GMVI.Cluster:t=new M.default;break;case GL.GMVI.Effect:t=new G.default;break;case GL.GMVI.TagCloud:t=new q.default;break;case GL.GMVI.Migrate:t=new V.default;break;case GL.GMVI.Bar:t=new CanvasBar;break;case GL.GMVI.WaterBubble:t=new H.default;break;case GL.GMVI.Star:t=new D.default;break;case GL.GMVI.Scatter:t=new R.default;break;case GL.GMVI.MigrateLines:t=new A.default;break;case GL.GMVI.Arrow:t=new w.default;break;case GL.GMVI.WaterBubble:t=new H.default;break;case GL.GMVI.Radial:t=new Z.default;break;default:t=new F.default}this.canvasType=t}},{key:"_clickEvent",value:function(t,e){var n=this.getMap(),r=t.coordinate,i=n.coordinateToContainerPoint(r);if(i.x=Math.ceil(i.x),i.y=Math.ceil(i.y),this.options.draw!=GL.GMVI.Cluster||this.stauts!=GL.GMVI.Cluster){var a=document.createElement("canvas");a.width=this._canvas.width,a.height=this._canvas.height;var o=a.getContext("2d"),s=this.data;this.options.draw==GL.GMVI.Cluster&&(s=this.unClustersData);for(var l=0;l<s.length;l++)if(this.canvasType instanceof A.default)for(var u=s[l].xy,f=0,h=u.length;f<h-1;f++){var g=[u[f],u[f+1]];if(o.beginPath(),c.default.drawArc(o,g,this.options),o.isPointInPath(i.x,i.y))return s[l].location=t,e(s[l],t),this}else if(o.beginPath(),c.default.draw(o,s[l],this.options),o.restore(),o.isPointInPath(i.x,i.y)||o.isPointInStroke(i.x,i.y))return s[l].location=t,e?void e(s[l],t):s[l]}}},{key:"_initEvent",value:function(){this.eventMap=this.eventMap||{};var t=this.getMap();for(var e in this.eventMap)t.addEventListener(e,this.eventMap[e])}},{key:"_initOptions",value:function(t){this.options=GL.GMVI.Extend(this.options,t),this.animationOptions=this.options.animation,this.isEnabledTime=this.animationOptions&&!(!1===this.animationOptions.enabled),this.intensity=new m.default({maxSize:this.options.maxSize,gradient:this.options.gradient,max:this.options.max}),this.category=new d.default(this.options.splitList),this.choropleth=new y.default(this.options.splitList),this.eventMap={}}},{key:"_clearTime",value:function(){this.animator&&this.animator.stop();var t=this.canvasType;t instanceof G.default&&t.anmimation&&(cancelAnimationFrame(t.anmimation),delete t.anmimation,console.log("clear effect animation")),t instanceof V.default&&t.migration&&(window.cancelAnimationFrame(t.migration.requestAnimationId),t.migration.started=!1,console.log("clear migration animation")),t instanceof A.default&&t.migration&&(window.cancelAnimationFrame(t.migration.requestAnimationId),t.migration.started=!1,console.log("clear migrationLine animation")),t instanceof R.default&&t.animation&&(window.cancelAnimationFrame(t.animation),console.log("clear scatter animation"));for(var e=0,n=this.data.length;e<n;e++){var r=this.data[e],i=r.video;i&&i.timeId&&window.clearInterval(i.timeId)}return this}}],[{key:"fromJSON",value:function(t){return t&&"GMVICanvasLayer"===t.type?new e(t.id,t.data,t.options):null}}]),e}(et.Layer);rt.mergeOptions(nt),rt.registerJSONType("GMVICanvasLayer");var it=function(t){function e(){return i(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),l(e,[{key:"getLayer",value:function(){return this.layer}},{key:"draw",value:function(){var t=this.layer;this.prepareCanvas(),t.getCanvas()||t.setCanvas(this.canvas),t.getContext()||t.setContext(this.context),t.inited||(t._init(),t.inited=!0),t._reset()}},{key:"drawOnInteracting",value:function(){}}]),e}(et.renderer.CanvasRenderer);rt.registerRenderer("canvas",it),GL.GMVI.CanvasLayer=rt},function(t,e,n){"use strict";function r(t,e){return function(n){return Math.max(Math.min(n,e),t)}}function i(t,e){var n=r(0,1);return function(r){return n((r-t)/(e-t))}}function a(t,e){function n(n){return a(t*(1-n)+n*e)}var a=r(t,e);return n.invert=function(){return i(t,e)},n}function o(t,e){if(!e.steps)throw new Error("steps option missing");this.options=e,this.running=!1,this._tick=this._tick.bind(this),this._t0=+new Date,this.callback=t,this._time=0,this.itemsReady=!1,this.options.animationDelay=0,this.options.maxDelta=.2,this.options.loop=void 0===e.loop||e.loop,this.steps(e.steps),e.stepsRange&&void 0!==e.stepsRange.start&&void 0!==e.stepsRange.end&&this.stepsRange(e.stepsRange.start,e.stepsRange.end)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(t,e){if(t<0)throw new Error("start must be a positive number");if(t>=e)throw new Error("start must be smaller than end");this.start=t,this.end=e};s.prototype={diff:function(){return this.end-this.start},isLast:function(t){return(0|t)===this.end}};var l="undefined"==typeof window?{}:window,u=l.requestAnimationFrame||l.mozRequestAnimationFrame||l.webkitRequestAnimationFrame||l.msRequestAnimationFrame||function(t){return l.setTimeout(t,1e3/60)},c=l.cancelAnimationFrame||l.mozCancelAnimationFrame||l.webkitCancelAnimationFrame||l.msCancelAnimationFrame||function(t){clearTimeout(t)};o.prototype={start:function(){this.running=!0,u(this._tick),this.options.onStart&&this.options.onStart(),1===this.stepsRange().diff()&&(this.running=!1)},isRunning:function(){return this.running},stop:function(){this.pause(),this.time(this.stepsRange().start),this.options.onStop&&this.options.onStop()},time:function(t){if(!arguments.length)return this._time;this._time=t;var e=this.range(this.domain(this._time));this.callback(e)},toggle:function(){this.running?this.pause():this.start()},rescale:function(){return this.domainInv=a(this.options.animationDelay,this.options.animationDelay+this.options.animationDuration),this.domain=this.domainInv.invert(),this.range=a(0,this._defaultStepsRange.end),this.rangeInv=this.range.invert(),this.time(this._time),this.running?this.start():this.pause(),this},duration:function(t){return arguments.length?(this.options.animationDuration=t,this.time()>t&&this.time(0),this.rescale(),this):this.options.animationDuration},steps:function(t){return this.options.steps=t,this._defaultStepsRange=new s(0,t),this.rescale()},stepsRange:function(t,e){if(2===arguments.length){if(t<this._defaultStepsRange.start)throw new Error("start must be within default steps range");if(e>this._defaultStepsRange.end)throw new Error("end must be within default steps range");this._customStepsRange=new s(t,e),this.options.onStepsRange&&this.options.onStepsRange();var n=0|this.step();(n<t||n>e)&&this.step(t)}return this._customStepsRange||this._defaultStepsRange},removeCustomStepsRange:function(){this._customStepsRange=void 0,this.options.onStepsRange&&this.options.onStepsRange()},step:function(t){if(0===arguments.length)return this.range(this.domain(this._time));this._time=this.domainInv(this.rangeInv(t))},pause:function(){this.running=!1,c(this._tick),this.options.onPause&&this.options.onPause()},_tick:function(){var t=+new Date,e=.001*(t-this._t0);e=Math.min(this.options.maxDelta,e),this._t0=t,this._time+=e;var n=this.stepsRange();n.isLast(this.step())&&(this.options.loop?this.step(n.start):(this.time(this.options.animationDuration),this.pause())),this.running&&(this.time(this._time),u(this._tick))}},e.default=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e){r(this,t),this.splitList=e||{other:1}}return i(t,[{key:"get",value:function(t){var e=this.splitList,n=e.other;for(var r in e)if(t==r){n=e[r];break}return n}}]),t}();e.default=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e){r(this,t),this.splitList=e||[{start:0,value:"red"}]}return i(t,[{key:"get",value:function(t){t=t.toFixed(0);for(var e=this.splitList,n=void 0,r=0;r<e.length;r++)if(t>=e[r].start&&t<=e[r].end){n=e[r].color;break}return n}}]),t}();e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(0),u=r(l),c=n(2),f=r(c),h=n(6),g=r(h),d={pulseRadius:25,pulseBorderWidth:3,arcLabelFont:"15px sans-serif",color:"red",size:10},p=function(t){function e(){return i(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return o(e,t),s(e,[{key:"draw",value:function(t,e,n){var r=e.get();t.clearRect(0,0,t.width,t.height),t.save();for(var i=0;i<r.length;i++){var a=r[i],o=a.xy[0],s=a.xy[1],l=a.color||n.fillStyle||d.color,u=a.size||n.size||d.size,c=o[0],h=o[1],p=s[0],y=s[1],v=new g.default({startX:c,startY:h,endX:p,endY:y,color:l});new f.default({x:p,y:y,rotation:v.endAngle+Math.PI/2,style:"arrow",color:l,size:u,borderWidth:0,borderColor:l}).draw(t)}}}]),e}(u.default);e.default=p},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return a(e,t),o(e,[{key:"draw",value:function(t,e,n){var r=t;if(r.clearRect(0,0,r.width,r.height),r.save(),e){for(var i in n)r[i]=n[i];var a=e.clusters,o=e.unClusters;if(a){var s=this,l=n.size||20;a.forEach(function(t){var e=t.xy,i=t.count;r.fillStyle=s.getOutColor(i);var a=s.getInnerColor(i);i>1e3&&(i=(i/1e3).toFixed(1)+"k"),r.beginPath(),r.arc(e[0],e[1],l,0,2*Math.PI),r.fill(),r.save(),r.fillStyle=a,r.beginPath(),r.arc(e[0],e[1],l-5,0,2*Math.PI),r.fill(),r.save(),r.font=n.font||"15px Microsoft YaHei UI",r.textAlign="center",r.textBaseline="middle",r.fillStyle=n.fillStyle||"#151515",r.fillText(i,e[0],e[1])})}if(o&&o.length>0)for(var u=o.length,l=n.size||10,c=0;c<u;c++){var f=o[c],h=f.xy,g=f.item,d=g.icon;d?(r.fillStyle="white",r.textAlign="center",r.textBaseline="middle",r.drawImage(d,h[0]-d.width/2,h[1]-d.height/2,d.width,d.height)):(r.fillStyle=n.fillStyle||this.getColor(1),r.beginPath(),r.arc(h[0],h[1],l,0,2*Math.PI),r.fill(),r.lineWidth=1,r.strokeStyle=n.strokeStyle||"#fff",r.stroke())}}}},{key:"getOutColor",value:function(t){var e="rgba(110, 204, 57, 0.6)";return t?(t>1e3&&(e="rgba(241, 211, 87, 0.6)"),t>5e3&&(e="rgba(235,129,70,0.6)"),e):e}},{key:"getInnerColor",value:function(t){var e="rgba(110, 204, 57, 1)";return t?(t>1e3&&(e="rgba(241, 211, 87, 1)"),t>5e3&&(e="rgba(235,129,70,1)"),e):e}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return a(e,t),o(e,[{key:"draw",value:function(t,e,n,r){var i=e.get();if(!i||0==i.length)return void(this.anmimation||(cancelAnimationFrame(this.anmimation),delete this.anmimation));this.data=i,this.options=n;var a=t.canvas,o=a.width,s=a.height;t.clearRect(0,0,o,s),t.save();for(var l in n)t[l]=n[l];var u=document.createElement("canvas");u.width=o,u.height=s;var c=u.getContext("2d");c.globalAlpha=.85,c.globalCompositeOperation="copy",this.anmimationEnd=!0;var f=this;if(!f.anmimation){!function e(){var n=a.width,i=a.height,l=f.devicePixelRatio=maptalks.Browser.retina?2:1;c.drawImage(a,0,0,n/l,i/l),t.clearRect(0,0,n,i),f.anmimationEnd&&f.drawEffect(t),t.drawImage(u,0,0,o,s),r&&r.completeRender(),f.anmimation=requestAnimationFrame(e)}()}}},{key:"drawEffect",value:function(t){this.anmimationEnd=!1;for(var e=this.options,n=e.offset||1,r=0,i=this.data.length;r<i;r++){var a=this.data[r],o=a._size||35,s=a.xy;t.strokeStyle=a.color||a.strokeStyle||e.strokeStyle||"red";this.devicePixelRatio;t.save(),t.arc(s[0],s[1],o,0,2*Math.PI,!0),t.closePath(),t.lineWidth=3,t.stroke(),t.restore(),t.beginPath(),this.data[r]._size+=n,this.data[r]._size>this.data[r].size&&(this.data[r]._size=1)}this.anmimationEnd=!0}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),u=r(l),c=n(0),f=r(c),h=function(t){function e(){return i(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return o(e,t),s(e,[{key:"draw",value:function(t,e,n){t.clearRect(0,0,t.width,t.height),t.save();for(var r=e.get(),i={},a=n._size||n.size||50,o=n.offset||{x:0,y:0},s=0;s<r.length;s++){var l=r[s].xy,c=Math.floor((l[0]-o.x)/a)+","+Math.floor((l[1]-o.y)/a);i[c]||(i[c]=0),i[c]+=~~(r[s].count||1)}for(var c in i){c=c.split(",");var f=new u.default({max:n.max||100,gradient:n.gradient});t.beginPath();var h=c[0]*a+.5+o.x,g=c[1]*a+.5+o.y;if(t.rect(h,g,a-1,a-1),t.fillStyle=f.getColor(i[c]),t.fill(),n.showText){t.fillStyle=n.fillStyle||"white",t.font=n.font||"15px Microsoft YaHei UI";var d=t.measureText(i[c]),p=d.width;h=(h+h+a)/2,g=(g+g+a)/2,t.fillText(i[c],h-p/2,g)}(n.strokeStyle||n.lineWidth)&&t.stroke()}t.restore()}}]),e}(f.default);e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(31),u=r(l),c=n(1),f=r(c),h=n(5),g=r(h),d=n(9),p=r(d),y=n(0),v=r(y),m=function(t){function e(){return i(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return o(e,t),s(e,[{key:"createCircle",value:function(t){if("undefined"==typeof document)var e=new p.default;else var e=document.createElement("canvas");var n=e.getContext("2d"),r=t/2,i=t+r;return e.width=e.height=2*i,n.shadowBlur=r,n.shadowColor="black",n.shadowOffsetX=n.shadowOffsetY=1e4,n.beginPath(),n.arc(i-1e4,i-1e4,t,0,2*Math.PI,!0),n.closePath(),n.fill(),e}},{key:"colorize",value:function(t,e,n){for(var r,i=n.maxOpacity||.8,a=3,o=t.length;a<o;a+=4)r=4*t[a],t[a]/256>i&&(t[a]=256*i),t[a-3]=e[r],t[a-2]=e[r+1],t[a-1]=e[r+2]}},{key:"drawGray",value:function(t,e,n){var r=n.max||100,i=n.minOpacity,a=n._size;void 0==a&&void 0==(a=n.size)&&(a=13);for(var o in n)t[o]=n[o];var s=new f.default({gradient:n.gradient,max:r}),l=this.createCircle(a),u=e,c={};u.forEach(function(t,e){var n=void 0===t.count?1:t.count,i=Math.min(1,n/r).toFixed(2);c[i]=c[i]||[],c[i].push(t)});for(var h in c)if(!isNaN(h)){var d=c[h];t.beginPath(),n.withoutAlpha||(t.globalAlpha=h),d.forEach(function(e,a){if(e.geometry){var o=e.xy,s=e.geometry.type;if(s===GL.GMVI.Geometry.Point){var u=void 0===e.count?1:e.count;t.globalAlpha=u/r,t.drawImage(l,o[0]-l.width/2,o[1]-l.height/2)}else s===GL.GMVI.Geometry.LineString||s===GL.GMVI.Geometry.Polyline?(t.globalAlpha=Math.max(e.count/r,void 0===i?.05:i),g.default.draw(t,e,n)):GL.GMVI.Geometry.Polygon}}),t.strokeStyle=s.getColor(h*r),t.stroke()}}},{key:"draw",value:function(t,e,n){var r=n.strength||.3;t.clearRect(0,0,t.width,t.height),t.strokeStyle="rgba(0,0,0,"+r+")",n=n||{};var i=e.get();if(t.save(),this.drawGray(t,i,n),!n.absolute){var a=t.getImageData(0,0,t.canvas.width,t.canvas.height);this.colorize(a.data,u.default.getImageData({defaultGradient:n.gradient||{.25:"rgba(0, 0, 255, 1)",.55:"rgba(0, 255, 0, 1)",.85:"rgba(255, 255, 0, 1)",1:"rgba(255, 0, 0, 1)"}}),n),t.putImageData(a,0,0),t.restore()}}}]),e}(v.default);e.default=m},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(9),o=function(t){return t&&t.__esModule?t:{default:t}}(a),s=function(){function t(){r(this,t)}return i(t,[{key:"getImageData",value:function(t){var e=t.gradient||t.defaultGradient;if("undefined"==typeof document)var n=new o.default(256,1);else var n=document.createElement("canvas");var r=n.getContext("2d");n.width=256,n.height=1;var i=r.createLinearGradient(0,0,256,1);for(var a in e)i.addColorStop(parseFloat(a),e[a]);return r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data}}]),t}();e.default=new s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),u=r(l),c=n(0),f=r(c),h=function(t){function e(){return i(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return o(e,t),s(e,[{key:"draw",value:function(t,e,n){t.clearRect(0,0,t.width,t.height),t.save();var r=e.get();for(var i in n)t[i]=n[i];var a=n.offset||{x:10,y:10},o=n._size||n.size||40;o=o/2/Math.sin(Math.PI/3);for(var s=2*o*Math.sin(Math.PI/3),l=1.5*o,c={},f=0;f<r.length;f++){var h=r[f].xy,g=(h[1]-a.y)/l,d=Math.round(g),p=(h[0]-a.x)/s-(1&d?.5:0),y=Math.round(p),v=g-d;if(3*Math.abs(v)>1){var m=p-y,b=y+(p<y?-1:1)/2,w=d+(g<d?-1:1),_=p-b,M=g-w;m*m+v*v>_*_+M*M&&(y=b+(1&d?1:-1)/2,d=w)}var x=y+"-"+d,G=c[x];G?G.push(r[f]):(G=c[x]=[r[f]],G.i=y,G.j=d,G.x=(y+(1&d?.5:0))*s,G.y=d*l)}var k=new u.default({max:n.max||100,maxSize:o,gradient:n.gradient});for(var i in c){var P=c[i];t.beginPath();for(var O,I,S,C,j=0;j<6;j++){var L=o,E=this.hex_corner({x:P.x+a.x,y:P.y+a.y},L,j);t.lineTo(E[0],E[1]),3==j&&(O=E[0],I=E[1]),0==j&&(S=E[0],C=E[1])}t.closePath();for(var V=0,f=0;f<P.length;f++)V+=P[f].count||1;if(t.fillStyle=k.getColor(V),t.fill(),t.strokeStyle=n.strokeStyle||"white",t.stroke(),n.showText&&V>0){t.textBaseline="middle",t.textAlign="center",t.font=n.font||"15px Arial",t.fillStyle=n.fillStyle||"white";var T=V.toFixed(0);t.measureText(T).width;S=(S+O)/2,C=(C+I)/2,t.fillText(T,S,C)}}t.restore()}},{key:"hex_corner",value:function(t,e,n){var r=60*n+30,i=Math.PI/180*r;return[t.x+e*Math.cos(i),t.y+e*Math.sin(i)]}}]),e}(f.default);e.default=h},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return a(e,t),o(e,[{key:"draw",value:function(t,e,n){var r=e.get();t.clearRect(0,0,t.width,t.height);for(var i=0,a=r.length;i<a;i++)if(r[i].geometry){t.save();var o=r[i].icon,s=r[i].xy,l=s[0],u=s[1];t.drawImage(o,l-o.width/2,u-o.height/2,o.width,o.height),t.restore()}}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(0),u=r(l),c=n(35),f=r(c),h={map:{},data:{},pulseRadius:25,pulseBorderWidth:3,arcWidth:1,arcLabel:!0,arcLabelFont:"15px sans-serif",Marker:{},Spark:{}},g=function(t){function e(){i(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.options=h,t._style={pulse:{radius:t.options.pulseRadius,borderWidth:t.options.pulseBorderWidth},arc:{width:t.options.arcWidth,label:t.options.arcLabel,font:t.options.arcLabelFont}}||{},t}return o(e,t),s(e,[{key:"draw",value:function(t,e,n,r){var i=e.get();this._style.pulse.radius=n.size||n.radius||this._style.pulse.radius,this._style.pulse.borderWidth=n.lineWidth||n.borderWidth||this._style.pulse.borderWidth,this._style.arc.font=n.font||this._style.arc.font,this._style.arc.width=n.lineWidth||n.borderWidth||this._style.arc.width;for(var a=[],o=maptalks.Browser.retina?2:1,s=0;s<i.length;s++){var l=i[s],u=l.xy,c=u[0],h=u[u.length-1];c=[c[0]*o,c[1]*o],h=[h[0]*o,h[1]*o],a.push({from:c,to:h,labels:l.labels,color:l.color||l.strokeStyle||l.fillStyle||n.strokeStyle||n.fillStyle||"#F9000C"})}this.migration?this.migration.updateData(a):this.migration=new f.default({data:a,context:t,style:this._style,speed:n.speed,renderer:r,arrowSize:n.arrowSize}),this.migration.started||this.migration.start(t.canvas)}}]),e}(u.default);e.default=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(3),s=r(o),l=n(2),u=r(l),c=n(6),f=r(c),h=n(7),g=r(h),d=n(10),p=r(d),y=function(){function t(e){i(this,t),this.data=e.data,this.store={arcs:[],markers:[],pulses:[],sparks:[]},this.renderer=e.renderer,this.speed=e.speed||5,this.playAnimation=!0,this.started=!1,this.context=e.context,this.style=e.style,this.arrowSize=e.arrowSize||3,this.init()}return a(t,[{key:"init",value:function(){this.updateData(this.data)}},{key:"add",value:function(){}},{key:"clear",value:function(){this.store={arcs:[],markers:[],pulses:[],sparks:[]},this.playAnimation=!0,this.started=!1,window.cancelAnimationFrame(this.requestAnimationId)}},{key:"updateData",value:function(t){t&&0!==t.length&&(this.clear(),this.data=t,this.data&&this.data.length>0&&s.default.forEach(this.data,function(t){var e=new f.default({startX:t.from[0],startY:t.from[1],endX:t.to[0],endY:t.to[1],labels:t.labels,label:this.style.arc.label,font:this.style.arc.font,width:this.style.arc.width,color:t.color}),n=new u.default({x:t.to[0],y:t.to[1],rotation:e.endAngle+Math.PI/2,style:"arrow",color:t.color,size:this.arrowSize,borderWidth:0,borderColor:t.color}),r=new g.default({x:t.to[0],y:t.to[1],radius:this.style.pulse.radius,color:t.color,borderWidth:this.style.pulse.borderWidth}),i=new p.default({startX:t.from[0],startY:t.from[1],endX:t.to[0],endY:t.to[1],width:15,color:t.color,speed:this.speed,arrowSize:this.arrowSize});this.store.arcs.push(e),this.store.markers.push(n),this.store.pulses.push(r),this.store.sparks.push(i)},this))}},{key:"start",value:function(t){var e=this,n=e.speed;this.started||(!function r(){if(e.requestAnimationId=window.requestAnimationFrame(r,t),e.playAnimation){maptalks.Browser.retina;t.width+=n,t.width-=n;for(var i in e.store)for(var a=e.store[i],o=0,s=a.length;o<s;o++)a[o].draw(e.context);e.renderer&&e.renderer.completeRender()}}(),this.started=!0)}},{key:"play",value:function(){this.playAnimation=!0}},{key:"pause",value:function(){this.playAnimation=!1}}]),t}();e.default=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(0),u=r(l),c=n(37),f=r(c),h={map:{},data:{},pulseRadius:25,pulseBorderWidth:3,arcWidth:1,arcLabel:!0,arcLabelFont:"15px sans-serif",Marker:{},Spark:{}},g=function(t){function e(){i(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.options=h,t._style={pulse:{radius:t.options.pulseRadius,borderWidth:t.options.pulseBorderWidth},arc:{width:t.options.arcWidth,label:t.options.arcLabel,font:t.options.arcLabelFont}}||{},t}return o(e,t),s(e,[{key:"draw",value:function(t,e,n,r){var i=e.get();this._style.pulse.radius=n.radius||this._style.pulse.radius,this._style.pulse.lineWidth=n.lineWidth||this._style.pulse.borderWidth,this._style.arc.font=n.font||this._style.arc.font,this._style.arc.width=n.lineWidth||this._style.arc.width;for(var a=[],o=maptalks.Browser.retina?2:1,s=0;s<i.length;s++){var l=i[s],u=l.xy,c=u[0],h=u[u.length-1];c=[c[0]*o,c[1]*o],h=[h[0]*o,h[1]*o],a.push({from:c,to:h,labels:l.labels,width:n.lineWidth||5,size:n.size||5,color:l.color||l.fillStyle||l.strokeStyle||n.strokeStyle||n.fillStyle||"#F9000C"})}this.migration?this.migration.updateData(a):this.migration=new f.default({data:a,context:t,style:this._style,speed:n.speed,renderer:r,lineWidth:n.lineWidth,arrowSize:n.arrowSize}),this.migration.started||this.migration.start(t.canvas)}}]),e}(u.default);e.default=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(3),s=r(o),l=n(2),u=(r(l),n(6)),c=(r(u),n(7)),f=(r(c),n(10)),h=r(f),g=function(){function t(e){i(this,t),this.renderer=e.renderer,this.data=e.data,this.store={arcs:[],markers:[],pulses:[],sparks:[]},this.speed=e.speed||5,this.playAnimation=!0,this.started=!1,this.context=e.context,this.style=e.style,this.arrowSize=e.arrowSize||3,this.lineWidth=e.lineWidth||10,this.init()}return a(t,[{key:"init",value:function(){this.updateData(this.data)}},{key:"add",value:function(){}},{key:"clear",value:function(){this.store={arcs:[],markers:[],pulses:[],sparks:[]},this.playAnimation=!0,this.started=!1,window.cancelAnimationFrame(this.requestAnimationId)}},{key:"updateData",value:function(t){t&&0!==t.length&&(this.clear(),this.data=t,this.data&&this.data.length>0&&s.default.forEach(this.data,function(t){var e=new h.default({startX:t.from[0],startY:t.from[1],endX:t.to[0],endY:t.to[1],width:this.lineWidth,color:t.color,size:this.arrowSize,speed:this.speed,arrowSize:this.arrowSize});this.store.sparks.push(e)},this))}},{key:"start",value:function(t){var e=this,n=e.speed;this.started||(!function r(){if(e.requestAnimationId=window.requestAnimationFrame(r,t),e.playAnimation){t.width+=n,t.width-=n;for(var i in e.store)for(var a=e.store[i],o=0,s=a.length;o<s;o++)a[o].draw(e.context);e.renderer&&e.renderer.completeRender()}}(),this.started=!0)}},{key:"play",value:function(){this.playAnimation=!0}},{key:"pause",value:function(){this.playAnimation=!1}}]),t}();e.default=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(0),u=r(l),c=n(7),f=r(c),h={pulseRadius:25,pulseBorderWidth:3,arcLabelFont:"15px sans-serif",color:"red",size:30},g=function(t){function e(){return i(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return o(e,t),s(e,[{key:"draw",value:function(t,e,n,r){function i(){o.width+=s,o.width-=s,x.animation&&window.cancelAnimationFrame(x.animation),x.animation=requestAnimationFrame(i);for(var e=0;e<x._data.length;e++)x._data[e].draw(t);r.completeRender()}var a=e.get(),o=t.canvas;t.clearRect(0,0,t.width,t.height),t.save();for(var s=n.speed||5,l=[],u=maptalks.Browser.retina?2:1,c=0;c<a.length;c++){var g=a[c],d=g.xy,p=g.size||n.size||h.size,y=d[0]*u,v=d[1]*u,m=g.color||g.strokeStyle||ojb.fillStyle||n.strokeStyle||n.fillStyle||h.color,b=n.lineWidth||h.pulseBorderWidth,w=n.font||h.font,_=g.name,M=new f.default({x:y,y:v,color:m,radius:p,borderWidth:b,font:w,name:_});l.push(M)}this._data=l;var x=this;i()}}]),e}(u.default);e.default=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(5),u=r(l),c=n(0),f=r(c),h=function(t){function e(){return i(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return o(e,t),s(e,[{key:"draw",value:function(t,e,n){var r=e.get();t.canvas;t.clearRect(0,0,t.width,t.height),t.save();for(var i in n)t[i]=n[i];for(var a=0,o=r.length;a<o;a++){var s=r[a];t.save(),s.fillStyle&&(t.fillStyle=s.fillStyle),s.strokeStyle&&(t.strokeStyle=s.strokeStyle);var l=s.geometry.type;t.beginPath(),u.default.draw(t,s,n),l==GL.GMVI.Geometry.Point||l==GL.GMVI.Geometry.Polygon||l==GL.GMVI.Geometry.MultiPolygon||l==GL.GMVI.Geometry.Circle?(t.fill(),(s.strokeStyle||n.strokeStyle)&&(n.stroke&&1!=n.stroke||t.stroke())):l!=GL.GMVI.Geometry.LineString&&l!=GL.GMVI.Geometry.Polyline||t.stroke(),t.restore()}t.restore()}}]),e}(f.default);e.default=h},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return a(e,t),o(e,[{key:"draw",value:function(t,e,n){var r=e.get();t.clearRect(0,0,t.width,t.height);for(var i=[],a=0,o=r.length;a<o;a++){var s=r[a],l=s.xy,u=l[0],c=l[1],f=s.color||s.fillStyle||s.strokeStyle||n.fillStyle||n.strokeStyle||"red",h=s.length||s.size||n.size||30;i.push(this.createStar(h,u,c,f))}for(var a=0;a<i.length;a++)i[a].angle+=i[a].changeAgele,t.save(),t.beginPath(),t.translate(i[a].x,i[a].y),t.globalAlpha=Math.abs(Math.sin(i[a].angle*Math.PI/180)),this.drawStar(0,0,i[a].radius1,i[a].radius2,i[a].num,"fill",i[a].color,t),t.restore()}},{key:"createStar",value:function(t,e,n,r){return{radius2:t/2.5,radius1:t,x:e,y:n,num:6,color:r,angle:360*Math.random(),changeAgele:10*Math.random()-5}}},{key:"drawStar",value:function(t,e,n,r,i,a,o,s){for(var l=360/(2*i),u=[],c=0;c<2*i;c++){var f={};c%2==0?(f.x=t+n*Math.cos(c*l*Math.PI/180),f.y=e+n*Math.sin(c*l*Math.PI/180)):(f.x=t+r*Math.cos(c*l*Math.PI/180),f.y=e+r*Math.sin(c*l*Math.PI/180)),u.push(f)}s.beginPath(),s.fillStyle=o,s.moveTo(u[0].x,u[0].y);for(var c=1;c<u.length;c++)s.lineTo(u[c].x,u[c].y);s.closePath(),"fill"==a?s.fill():s.stroke()}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return a(e,t),o(e,[{key:"draw",value:function(t,e,n){var r=e.get(),i=t;i.clearRect(0,0,i.width,i.height),i.beginPath(),i.textBaseline="top";for(var a in n)i[a]=n[a];for(var o=[],s=i.canvas.width,l=i.canvas.height,u=0,c=r.length;u<c;u++)if(r[u].geometry){var f=r[u].xy,h=f[0],g=f[1],d=r[u].size||n.size||parseInt(20*Math.random())+10,p=r[u].name||"",y=r[u].color||r[u].fillStyle||r[u].strokeStyle||n.fillStyle||n.strokeStyle||"red";if(!(h<-200||g<-200||h>s+200||g>l+200)&&p){i.font="bold "+d+"px Arial";var v=i.measureText(p).width,m=h-v/2,b=g-d/2,w={sw:{x:m,y:b+d},ne:{x:m+v,y:b}};this.hasOverlay(o,w)||(o.push(w),i.fillStyle=y,i.fillText(p,m,b))}}}},{key:"hasOverlay",value:function(t,e){for(var n=0;n<t.length;n++)if(this.isRectOverlay(t[n],e))return!0;return!1}},{key:"isRectOverlay",value:function(t,e){var n=Math.min(t.ne.x,e.ne.x),r=Math.min(t.sw.y,e.sw.y),i=Math.max(t.sw.x,e.sw.x),a=Math.max(t.ne.y,e.ne.y);return n>i&&r>a}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return a(e,t),o(e,[{key:"draw",value:function(t,e,n){var r=e.get();t.clearRect(0,0,t.width,t.height);for(var i in n)t[i]=n[i];t.textAlign="center",t.textBaseline="middle";for(var a=(n.offset,0),o=r.length;a<o;a++){t.save();var s=r[a];t.fillStyle=s.color||s.fillStyle||s.strokeStyle||n.fillStyle||n.strokeStyle||"white";var l=s.xy,u=l[0],c=l[1],f=(s.rotate,s.text);t.fillText(f,u,c),t.restore()}}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e,n,r){this.xy=r,this.refresh(t,e,n)}Object.defineProperty(e,"__esModule",{value:!0});var l,u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(0),f=function(t){return t&&t.__esModule?t:{default:t}}(c),h=(l={radius:50,lineWidth:2,data:.5,waterColor:"rgba(25, 139, 201, 1)",textColor:"rgba(06, 85, 128, 0.8)",font:"",wave:!0,txt:void 0,animation:!0},o(l,"textColor","white"),o(l,"percentNum",.8),l);s.prototype={refresh:function(t,e,n){t.getContext("2d").clearRect(0,0,t.width,t.height),this._init(t,e,n)},_init:function(t,e,n){var r=e.radius,i=e.lineWidth;t.width=2*r+i,t.height=2*r+i,this._buildShape(t,e,n)},_buildShape:function(t,e,n){var r=t.getContext("2d"),i=2*e.lineWidth,a=e.radius-i,o=e.data,s=e.lineWidth,l=e.waterColor,u=e.textColor,c=e.font,f=e.wave,h=e.radius+s/2,g=e.radius+s/2;r.beginPath(),r.arc(h,g,e.radius,0,2*Math.PI),r.lineWidth=s,r.strokeStyle=l,r.stroke(),e.animation?this._animate(r,a,o,s,l,h,g,f,n):this._fillWater(r,a,o,s,l,h,g,f,n),"string"==typeof e.txt&&this._drawText(r,u,c,e.radius,o,h,g,e.txt,n)},_fillWater:function(t,e,n,r,i,a,o,s,l){t.beginPath(),t.globalCompositeOperation="destination-over";var u,c=2*e*(1-n)+(o-e),f=a-Math.sqrt(e*e-(o-c)*(o-c)),h=a,g=c,d=2*h-f,p=c;u=n>.9||n<.1||!s?c:c-(h-f)/4,t.beginPath(),t.moveTo(f,c),t.quadraticCurveTo((f+h)/2,u,h,g),t.quadraticCurveTo((h+d)/2,2*c-u,d,p);var y=-Math.asin((a-c)/e),v=Math.PI-y;t.arc(a,o,e,y,v,!1),t.fillStyle=i,t.fill();var m=this.xy,a=m[0],o=m[1],b=t.canvas;l.drawImage(b,a-b.width/2,o-b.height/2,b.width,b.height)},_drawText:function(t,e,n,r,i,a,o,s,l){t.globalCompositeOperation="source-over";var u=n?n.replace(/\D+/g,""):.4*r;t.font=n||"bold "+u+"px Microsoft Yahei",s=s.length?s:100*i+"%";var c=o+u/2,f=a-t.measureText(s).width/2;t.fillStyle=e,t.fillText(s,f,c);var h=this.xy,a=h[0],o=h[1],g=t.canvas;l.drawImage(g,a-g.width/2,o-g.height/2,g.width,g.height)},_animate:function(t,e,n,r,i,a,o,s,l){var u={value:0},c=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},f=this,h=function(){u.value<n-.01?(u.value+=(n-u.value)/2,f._runing=!0):f._runing=!1};!function n(){f._fillWater(t,e,u.value,r,i,a,o,s,l),h(),f._runing&&c(n)}()}};var g=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return a(e,t),u(e,[{key:"draw",value:function(t,e,n){var r=e.get();t.clearRect(0,0,t.width,t.height);for(var i=this.getMaxCount(r)/h.percentNum,a=0,o=r.length;a<o;a++){var l=r[a];h.radius=l.length||n.size||h.radius,h.lineWidth=n.lineWidth||h.lineWidth,h.waterColor=l.color||l.fillStyle||l.strokeStyle||n.fillStyle||h.waterColor,h.textColor=n.fillStyle||n.strokeStyle||n.textStyle||h.textColor||h.textColor,h.data=l.count/i,h.txt=l.count;var u=l.xy,c=document.createElement("canvas");new s(c,h,t,u)}}}]),e}(f.default);e.default=g},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return a(e,t),o(e,[{key:"draw",value:function(t,e,n){var r=e.get();t.clearRect(0,0,t.width,t.height);for(var i=0,a=r.length;i<a;i++){var o=r[i],s=o.xy,l=s[0],u=s[1],c=o.length||o.size||n.size||30,f=o.color||o.fillStyle||o.strokeStyle||n.strokeStyle||n.fillStyle||"red";t.strokeStyle=f;for(var h=2*Math.PI/40,g=0;g<40;g++){var d=c,p=(g+1)*h;t.save(),t.translate(l,u),t.beginPath(),t.save(),t.rotate(p),t.moveTo(d,0),t.lineTo(0,0),t.restore(),t.closePath(),t.stroke(),t.restore()}}}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=window.maptalks,l=function(t){function e(t,n,a){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,a))}return a(e,t),o(e,[{key:"toArray",value:function(){for(var t=this.getShell(),e=[],n=0;n<t.length;n++){var r=t[n];e.push([r.x,r.y])}return e}}]),e}(s.Circle);t.exports=l},function(t,e){t.exports={id:"maptalks-gmvi",version:"0.1.0",date:"2018.6.25",skin:"default"}}])});